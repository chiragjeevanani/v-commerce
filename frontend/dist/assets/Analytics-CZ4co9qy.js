import{c as h,r,j as e,Q as P,B as c,w as $,a8 as M,m as _}from"./index-DhQy7Vb3.js";import{S as g,a as n}from"./analytics.service-YSKvIuqu.js";import{C as o,a as d,c as x,d as m,e as B}from"./card-D8EwhQuE.js";import{C as L}from"./calendar-teNmuDLo.js";import{D as z}from"./download-CqSX6Ea1.js";import{Z as E}from"./zap-Cdkcn_Jz.js";import{A as I}from"./arrow-up-right-lZAoOsqP.js";import{T as V}from"./trending-up-u3ptfXGT.js";const F=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],H=h("map",F);const K=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],U=h("mouse-pointer-2",K);const Z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],G=h("target",Z),ae=()=>{const[j,f]=r.useState([]),[b,v]=r.useState([]),[i,N]=r.useState([]),[u,y]=r.useState([]),[t,w]=r.useState(null),[S,k]=r.useState(!0),[D,Q]=r.useState("Month");r.useEffect(()=>{(async()=>{try{const[a,C,R,A,T]=await Promise.all([n.getSalesChartData("month"),n.getOrderStatusDistribution(),n.getTopProducts(),n.getRegionalSales(),n.getKPIData()]);f(a.labels.map((l,O)=>({label:l,value:a.datasets[0].data[O]}))),v(C),N(R.map(l=>({name:l.name,sales:l.sales,revenue:l.revenue,growth:"+0%"}))),y(A),w(T)}catch(a){console.error(a)}finally{k(!1)}})()},[]);const p=t&&t.totalOrders>0?(t.revenue/t.totalOrders).toFixed(2):"0.00";return S?e.jsx("div",{className:"h-96 flex items-center justify-center animate-pulse",children:"Loading Analytics..."}):e.jsxs("div",{className:"space-y-8 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Deep dive into your store's performance metrics."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(P,{variant:"outline",className:"px-3 py-1 gap-2 bg-background border-2",children:[e.jsx(L,{className:"h-3.5 w-3.5"})," ",D,": Current"]}),e.jsxs(c,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"})," Reports ",e.jsx($,{className:"h-3 w-3"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:G,label:"Total Orders",value:t?.totalOrders||0,trend:t?.trends?.orders||"+0%",color:"text-blue-600",bg:"bg-blue-50"},{icon:U,label:"New Customers",value:t?.newCustomers||0,trend:t?.trends?.customers||"+0%",color:"text-purple-600",bg:"bg-purple-50"},{icon:M,label:"Avg. Order Value",value:`₹${p}`,trend:"+2.5%",color:"text-green-600",bg:"bg-green-50"},{icon:E,label:"Total Revenue",value:`₹${(t?.revenue||0).toLocaleString()}`,trend:t?.trends?.revenue||"+0%",color:"text-orange-600",bg:"bg-orange-50"}].map((s,a)=>e.jsx(_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:a*.1},children:e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsxs(d,{className:"p-5 flex flex-col items-center text-center gap-2",children:[e.jsx("div",{className:`p-3 rounded-full ${s.bg} ${s.color}`,children:e.jsx(s.icon,{className:"h-6 w-6"})}),e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest",children:s.label}),e.jsx("h3",{className:"text-3xl font-black",children:s.value}),e.jsxs("span",{className:`text-[10px] font-bold ${s.trend.startsWith("+")?"text-green-500":"text-red-500"}`,children:[s.trend," vs last period"]})]})})},s.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(g,{title:"Revenue Trends",data:j}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(m,{children:"Top Selling Products"}),e.jsx(B,{children:"Performance of your best moving inventory."})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:i.length>0?i.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-xl border border-transparent hover:border-primary/20 hover:bg-muted/50 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"h-10 w-10 bg-primary/10 rounded-lg flex items-center justify-center font-bold text-primary",children:["#",a+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm max-w-[150px] md:max-w-xs truncate",title:s.name,children:s.name}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[s.sales," units sold"]})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-black text-sm",children:["₹",s.revenue.toLocaleString()]}),e.jsx("span",{className:"text-[10px] font-bold text-green-500",children:"Best Seller"})]}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:e.jsx(I,{className:"h-4 w-4"})})]})]},a)):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"No sales data available yet."})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 text-white border-none shadow-xl shadow-indigo-500/10",children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center gap-2 drop-shadow-md",children:[e.jsx(V,{className:"h-5 w-5 text-indigo-200"}),"Smart Insights"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/10 p-4 rounded-xl backdrop-blur-sm border border-white/10",children:[e.jsx("p",{className:"text-xs font-medium text-indigo-100",children:"Revenue Opportunity"}),e.jsxs("p",{className:"text-sm font-bold mt-1 text-pretty",children:["Your average order value is ",e.jsxs("span",{className:"text-green-300",children:["₹",p]}),". Consider bundling products to increase this by 15%."]})]}),e.jsxs("div",{className:"bg-white/10 p-4 rounded-xl backdrop-blur-sm border border-white/10",children:[e.jsx("p",{className:"text-xs font-medium text-indigo-100",children:"Stock Alert"}),i.length>0?e.jsxs("p",{className:"text-sm font-bold mt-1 text-pretty",children:['"',i[0].name.slice(0,20),'..." is selling fast. Check inventory levels now.']}):e.jsx("p",{className:"text-sm font-bold mt-1 text-pretty",children:"No critical stock alerts at the moment."})]}),e.jsx(c,{className:"w-full bg-white text-indigo-700 hover:bg-white/90 font-bold",children:"Generate Full Report"})]})]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(g,{title:"Order Distribution",data:b,type:"pie"})}),e.jsxs(o,{className:"h-[432px]",children:[e.jsx(x,{children:e.jsx(m,{children:"Regional Sales"})}),e.jsx(d,{className:"flex flex-col items-center justify-center h-full pt-0",children:u.length>0?e.jsxs("div",{className:"w-full h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"h-32 w-full bg-muted/20 rounded-lg flex items-center justify-center border border-dashed mb-4 relative overflow-hidden",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground/30"}),e.jsx("div",{className:"absolute bottom-2 right-2 text-[10px] text-muted-foreground",children:"Heatmap"})]}),e.jsx("div",{className:"space-y-3 overflow-y-auto max-h-[220px] pr-2 scrollbar-thin",children:u.map(s=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-muted-foreground px-1 uppercase tracking-tighter",children:[e.jsx("span",{className:"truncate max-w-[150px]",title:s.region,children:s.region}),e.jsxs("span",{children:[s.value,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${s.value}%`}})})]},s.region))})]}):e.jsx("div",{className:"text-center text-muted-foreground",children:e.jsx("p",{children:"No regional data available yet."})})})]})]})]})]})};export{ae as default};
