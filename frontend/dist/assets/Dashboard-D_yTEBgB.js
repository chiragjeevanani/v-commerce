import{c as g,j as e,m as j,x as k,r as a,aa as O,ai as A,L as R,B as _,T as L}from"./index-DEuHK2Q3.js";import{C as N,a as f,c as T,d as P}from"./card-D9v-e9xN.js";import{T as V}from"./trending-up-DDxPbQVj.js";import{S as p,a as h}from"./analytics.service-BA2gL-NQ.js";import{o as B}from"./orders.service-BHN5Wuv9.js";import{C as I}from"./clock-CQhbvDMy.js";import{A as E}from"./arrow-right-jo4rUUB6.js";import"./mockData-Da8oLpbF.js";const H=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],q=g("dollar-sign",H);const F=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],K=g("trending-down",F),i=({title:t,value:n,icon:c,trend:o,trendValue:x,index:m})=>{const d=o==="up";return e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1,duration:.4},children:e.jsx(N,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-0 pb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:e.jsx(c,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex items-baseline justify-between mt-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[d?e.jsx(V,{className:"h-3 w-3 text-green-500"}):e.jsx(K,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:k("text-[10px] font-medium",d?"text-green-500":"text-red-500"),children:x}),e.jsx("span",{className:"text-[10px] text-muted-foreground ml-1",children:"vs last month"})]})]})})]})})})},X=()=>{const[t,n]=a.useState(null),[c,o]=a.useState([]),[x,m]=a.useState([]),[d,v]=a.useState([]),[b,y]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const[r,u,w,l]=await Promise.all([h.getKPIData(),h.getSalesChartData("month"),h.getOrderStatusDistribution(),B.getRecentOrders()]);n(r),o(u?.labels?.map((D,C)=>({label:D,value:u.datasets?.[0]?.data?.[C]||0}))||[]),m(w||[]);const S=Array.isArray(l)?l:Array.isArray(l?.data)?l.data:[];v(S)}catch(r){console.error("Failed to fetch dashboard data:",r)}finally{y(!1)}})()},[]),b?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-10 w-48 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-card rounded-xl border animate-pulse"},s))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 h-[400px] bg-card rounded-xl border animate-pulse"}),e.jsx("div",{className:"h-[400px] bg-card rounded-xl border animate-pulse"})]})]}):e.jsxs("div",{className:"space-y-8 pb-10",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome back, here's what's happening today."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(i,{index:0,title:"Total Orders",value:t?.totalOrders||0,icon:O,trend:"up",trendValue:t?.trends?.orders||"0%"}),e.jsx(i,{index:1,title:"Total Revenue",value:`₹${(t?.revenue||0).toLocaleString()}`,icon:q,trend:"up",trendValue:t?.trends?.revenue||"0%"}),e.jsx(i,{index:2,title:"Pending Orders",value:t?.pendingOrders||0,icon:I,trend:"down",trendValue:"-2%"}),e.jsx(i,{index:3,title:"New Customers",value:t?.newCustomers||0,icon:A,trend:"up",trendValue:t?.trends?.customers||"0%"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(p,{title:"Revenue Performance",data:c})}),e.jsx("div",{children:e.jsx(p,{title:"Order Distribution",data:x,type:"pie"})})]}),e.jsxs(N,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Recent Orders"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Review your latest transactions."})]}),e.jsx(R,{to:"/admin/orders",children:e.jsxs(_,{variant:"outline",size:"sm",className:"gap-2",children:["View All ",e.jsx(E,{className:"h-4 w-4"})]})})]}),e.jsx(f,{children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"h-12 px-4 text-left text-muted-foreground",children:"Order ID"}),e.jsx("th",{className:"h-12 px-4 text-left text-muted-foreground",children:"Customer"}),e.jsx("th",{className:"h-12 px-4 text-left text-muted-foreground",children:"Amount"}),e.jsx("th",{className:"h-12 px-4 text-left text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-4 text-right text-muted-foreground",children:"Date"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:d.map((s,r)=>e.jsxs(j.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:r*.05},className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:s.id||s._id}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium",children:s.user?.name||"Guest Customer"}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.user?.email||"N/A"})]})}),e.jsxs("td",{className:"p-4",children:["₹",s.total?.toFixed(2)]}),e.jsx("td",{className:"p-4",children:e.jsx(L,{variant:"secondary",className:s.status==="delivered"?"bg-green-100 text-green-700 dark:bg-green-900/30":s.status==="shipped"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30",children:s.status})}),e.jsx("td",{className:"p-4 text-right text-xs text-muted-foreground",children:new Date(s.createdAt||s.date).toLocaleDateString()})]},s._id||s.id))})]})})})]})]})};export{X as default};
