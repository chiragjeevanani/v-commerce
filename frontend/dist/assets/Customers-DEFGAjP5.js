import{c as o,E as w,N as C,r,j as e,af as u,aa as k,a9 as M,m as S,Q as A,ag as D,ah as L,B as _,ai as E,aj as n,am as U,ad as p}from"./index-DhQy7Vb3.js";import{C as l,a as d,c as T}from"./card-D8EwhQuE.js";import{L as B}from"./loader-circle-CpSO1Tqn.js";import{M as F}from"./mail-DaRiWoiA.js";import{P as q}from"./phone-CsU9CeOR.js";import{E as H}from"./ellipsis-DY6o3Icw.js";import{A as I}from"./arrow-up-right-lZAoOsqP.js";const Q=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],R=o("ban",Q);const $=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],z=o("history",$);const P=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],g=o("user-check",P),Y=()=>{const{toast:i}=w(),f=C(),[c,j]=r.useState(""),[a,N]=r.useState([]),[y,m]=r.useState(!0),x=async()=>{m(!0);try{const s=await p.getUsers();s.success&&N(s.data)}catch(s){console.error("Fetch Customers Error:",s),i({title:"Error",description:"Failed to load customers from database.",variant:"destructive"})}finally{m(!1)}};r.useEffect(()=>{x()},[]);const h=async s=>{try{const t=await p.toggleUserStatus(s);t.success&&(i({title:"Success",description:t.message}),x())}catch{i({title:"Error",description:"Failed to update user status.",variant:"destructive"})}},v=a.filter(s=>s.fullName.toLowerCase().includes(c.toLowerCase())||s.email.toLowerCase().includes(c.toLowerCase())),b=a.filter(s=>s.isActive).length;return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Customers Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage your platform users and their activity."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(l,{className:"bg-primary/5 border-primary/20",children:e.jsxs(d,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:e.jsx(u,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold",children:a.length})]})]})}),e.jsx(l,{className:"bg-green-50 dark:bg-green-950/20 border-green-100 dark:border-green-900/50",children:e.jsxs(d,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/40 rounded-xl text-green-600 dark:text-green-400",children:e.jsx(g,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold",children:b})]})]})}),e.jsx(l,{className:"bg-yellow-50 dark:bg-yellow-950/20 border-yellow-100 dark:border-yellow-900/50",children:e.jsxs(d,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/40 rounded-xl text-yellow-600 dark:text-yellow-400",children:e.jsx(z,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"New This Week"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})})]}),e.jsxs(l,{children:[e.jsx(T,{className:"border-b bg-muted/20",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search by name or email...",className:"pl-10",value:c,onChange:s=>j(s.target.value)})]})})}),e.jsx(d,{className:"p-0",children:e.jsx("div",{className:"relative w-full overflow-auto",children:y?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(B,{className:"h-8 w-8 text-primary animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Fetching customers from database..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold",children:"No customers found"}),e.jsx("p",{className:"text-muted-foreground",children:"When users signup, they will appear here."})]}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Customer"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Contact"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Joined On"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-6 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:v.map((s,t)=>e.jsxs(S.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:t*.05},className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:s.fullName.charAt(0)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold",children:s.fullName}),e.jsxs("span",{className:"text-[10px] text-muted-foreground uppercase",children:["Role: ",s.role]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx(F,{className:"h-3 w-3 text-muted-foreground"}),s.email]}),s.phoneNumber&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx(q,{className:"h-3 w-3 text-muted-foreground"}),s.phoneNumber]})]})}),e.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(A,{variant:"outline",className:s.isActive?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:s.isActive?"Active":"Deactivated"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(D,{children:[e.jsx(L,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"icon",children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(E,{align:"end",className:"w-48",children:[e.jsxs(n,{onClick:()=>f(`/admin/customers/${s._id}`),children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," View Details"]}),e.jsx(U,{}),s.isActive?e.jsxs(n,{className:"text-red-500",onClick:()=>h(s._id),children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Deactivate User"]}):e.jsxs(n,{className:"text-green-600",onClick:()=>h(s._id),children:[e.jsx(g,{className:"mr-2 h-4 w-4"})," Activate User"]})]})]})})]},s._id))})]})})})]})]})};export{Y as default};
