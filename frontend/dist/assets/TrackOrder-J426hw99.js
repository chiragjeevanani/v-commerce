import{M as C,N as k,r as i,j as e,B as c,m as g,a7 as O,a9 as S,aa as A,Q as I,U as T}from"./index-DhQy7Vb3.js";import{C as d,a as n,c as u,d as f}from"./card-D8EwhQuE.js";import{S as P}from"./separator-CVTjJVsM.js";import{O as E}from"./OrderTimeline-DohPdkgu.js";import{a as M}from"./api-B_zk-HTA.js";import{A as q}from"./arrow-left-CKb50wlr.js";import{C as F}from"./circle-alert-C9Kq_WWe.js";import{L}from"./loader-circle-CpSO1Tqn.js";import{M as z}from"./map-pin-D_KXloBV.js";import{C as B}from"./calendar-teNmuDLo.js";import"./index-CwXijMcI.js";const V=()=>{const{orderId:a}=C(),m=k(),[o,j]=i.useState(a||""),[s,N]=i.useState(null),[b,y]=i.useState(!1),[x,h]=i.useState(null),v=async r=>{if(r){y(!0),h(null);try{const l=await M.trackOrder(r);l?N(l):(h("Order not found. Please check the Order ID."),N(null))}catch{h("Failed to fetch order information.")}finally{y(!1)}}};i.useEffect(()=>{a&&v(a)},[a]);const w=r=>{r.preventDefault(),o&&m(`/track-order/${o}`)};return e.jsxs("div",{className:"container py-8 md:py-12 max-w-5xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>m(-1),className:"rounded-full",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Track Your Order"})]}),!a||x?e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto text-center",children:e.jsx(d,{className:"border-2 border-dashed border-primary/20 bg-primary/5",children:e.jsxs(n,{className:"pt-10 pb-10",children:[e.jsx(O,{className:"w-16 h-16 text-primary/40 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Track your shipment"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Enter your order identification number below to view its current status and location."}),e.jsxs("form",{onSubmit:w,className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(S,{placeholder:"Order ID (e.g., ORD-12345)",value:o,onChange:r=>j(r.target.value),className:"h-12 text-lg font-mono",required:!0}),e.jsxs(c,{type:"submit",size:"lg",className:"h-12 px-8",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),"Track Now"]})]}),x&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 p-4 rounded-lg bg-destructive/10 text-destructive flex items-center gap-2 justify-center",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:x})]})]})})}):b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(L,{className:"w-12 h-12 text-primary animate-spin"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Retrieving shipment details..."})]}):s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-xl",children:"Shipment Progress"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Order ID: ",e.jsx("span",{className:"font-mono font-bold text-foreground",children:s.id})]})]}),e.jsx(I,{variant:"secondary",className:"px-3 py-1 bg-primary/10 text-primary border-none",children:s.status.toUpperCase()})]}),e.jsx(n,{className:"pt-6",children:e.jsx(E,{steps:s.timeline,currentStatus:s.status})})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(f,{className:"text-xl",children:"Order Items"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[s.items.map(r=>{const l=t=>{if(!t)return"";if(typeof t!="string")return t;try{if(t.startsWith("[")||t.startsWith("{")){const p=JSON.parse(t);return Array.isArray(p)?p[0]:t}return t}catch{return t}};return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-muted overflow-hidden flex-shrink-0",children:e.jsx("img",{src:l(r.image),alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium leading-tight",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",r.quantity]})]}),e.jsxs("p",{className:"font-bold",children:["₹",(r.price*r.quantity).toFixed(2)]})]},r.productId||r.pid)}),e.jsx(P,{className:"my-4"}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Total Paid"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["₹",s.total.toFixed(2)]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(f,{className:"text-lg",children:"Delivery Details"})}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(z,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Shipping Address"}),e.jsx("p",{className:"text-sm font-semibold",children:typeof s.shippingAddress=="object"?e.jsxs(e.Fragment,{children:[s.shippingAddress.fullName,e.jsx("br",{}),s.shippingAddress.street,e.jsx("br",{}),s.shippingAddress.city,", ",s.shippingAddress.zipCode]}):s.shippingAddress})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(B,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Expected Delivery"}),e.jsx("p",{className:"text-sm font-semibold",children:s.estimatedDelivery})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(T,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm font-semibold",children:s.paymentMethod})]})]})]})]}),e.jsx(d,{className:"bg-primary/5 border-primary/10",children:e.jsxs(n,{className:"pt-6",children:[e.jsx("h4",{className:"font-bold mb-2",children:"Need help?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"If you have any questions about your order, our 24/7 support team is here to help."}),e.jsx(c,{variant:"outline",className:"w-full bg-background",children:"Contact Support"})]})}),e.jsx(c,{variant:"ghost",className:"w-full text-muted-foreground hover:text-primary",onClick:()=>{j(""),m("/track-order")},children:"Track another order"})]})]}):null]})};export{V as default};
