import{i as F,s as M,r as n,j as e,B as i,L as C,a as O,P as k,l as D,M as A,t as B,T as V,N as v,v as o,V as $}from"./index-BpRMWdVM.js";import{T as R,a as U,b as h,c as u}from"./tabs-BcXXqXRW.js";import{C as p,c as f,d as j,e as g,a as b,b as S}from"./card-CyVSnPS_.js";import{L as N}from"./label-XkaMJijg.js";import{a as y}from"./address.service-BOoEARUx.js";import{o as _}from"./orders.service-BEYIHZcJ.js";import{A as I}from"./arrow-left-DGt4rPff.js";import{T as Y}from"./truck-ky9tsUIx.js";import{E as H}from"./eye-D0NRzLWa.js";import{P as q}from"./plus-cVjnq_g6.js";import"./index-C_G7Jul-.js";const ne=()=>{const a=F(),{user:l,logout:c}=M(),[d,m]=n.useState([]),[x,r]=n.useState([]),[L,w]=n.useState(!0),[J,K]=n.useState(!1);n.useEffect(()=>{(async()=>{w(!0);try{const[t,z]=await Promise.all([_.getMyOrders(),y.getAddresses()]);m(t),r(z)}catch(t){console.error("Error fetching account data",t)}finally{w(!1)}})()},[]);const T=async s=>{try{const t=await y.deleteAddress(s);r(t.data),o({title:"Success",description:"Address deleted successfully"})}catch(t){o({title:"Error",description:t.message,variant:"destructive"})}},P=async s=>{try{const t=await y.setDefaultAddress(s);r(t.data),o({title:"Success",description:"Default address updated"})}catch(t){o({title:"Error",description:t.message,variant:"destructive"})}},E=()=>{c(),a("/")};return e.jsxs("div",{className:"container py-8",children:[e.jsxs(i,{variant:"ghost",className:"mb-6 hover:bg-transparent hover:text-primary transition-colors group p-0",onClick:()=>a(-1),children:[e.jsx(I,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"})," Back"]}),e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Account"}),e.jsxs(R,{defaultValue:"orders",className:"space-y-6",children:[e.jsxs(U,{className:"grid w-full grid-cols-4 lg:w-[400px]",children:[e.jsx(h,{value:"orders",children:"Orders"}),e.jsx(h,{value:"profile",children:"Profile"}),e.jsx(h,{value:"address",children:"Address"}),e.jsx(h,{value:"logout",className:"text-destructive",children:"Logout"})]}),e.jsx(u,{value:"orders",children:e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Recent Orders"}),e.jsx(g,{children:"View and track your most recent purchases."})]}),e.jsx(i,{variant:"ghost",className:"text-primary hover:text-primary/80",asChild:!0,children:e.jsxs(C,{to:"/orders",children:["View All",e.jsx(O,{className:"ml-1 h-4 w-4"})]})})]}),e.jsx(b,{className:"space-y-4",children:L?e.jsxs("div",{className:"flex flex-col items-center py-10 gap-2",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading orders..."})]}):d.length>0?d.slice(0,3).map(s=>e.jsxs("div",{className:"group border rounded-xl p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:border-primary/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:e.jsx(k,{className:"w-6 h-6"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-bold",children:s.id}),e.jsx(D,{variant:"secondary",className:"bg-primary/5 text-primary border-none",children:s.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(s.date??s.createdAt).toLocaleDateString()," â€¢ ",s.items?.length||0," item",(s.items?.length||0)!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs(i,{variant:"outline",size:"sm",className:"flex-1 md:flex-none",onClick:()=>a(`/track-order/${s.id}`),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Track"]}),e.jsxs(i,{variant:"ghost",size:"sm",className:"flex-1 md:flex-none group-hover:text-primary",onClick:()=>a(`/orders/${s.id}`),children:[e.jsx(H,{className:"mr-2 h-4 w-4"})," Details"]})]})]},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"You haven't placed any orders yet."}),e.jsx(i,{variant:"link",asChild:!0,children:e.jsx(C,{to:"/shop",children:"Start shopping"})})]})})]})}),e.jsx(G,{user:l}),e.jsx(u,{value:"address",children:e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Saved Addresses"}),e.jsx(g,{children:"Manage your shipping addresses."})]}),e.jsxs(i,{size:"sm",className:"gap-2",onClick:()=>a("/account/address/new"),children:[e.jsx(q,{className:"h-4 w-4"})," Add New"]})]}),e.jsx(b,{className:"space-y-4",children:x.length>0?x.map(s=>e.jsxs("div",{className:`border rounded-xl p-5 relative group transition-all ${s.isDefault?"border-primary bg-primary/5":"hover:border-primary/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:`h-4 w-4 ${s.isDefault?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:s.addressType}),s.isDefault&&e.jsx(D,{className:"text-[10px] font-black uppercase",children:"Default"})]}),e.jsx("div",{className:"font-black text-lg mb-1",children:s.fullName}),e.jsxs("div",{className:"text-sm text-muted-foreground leading-relaxed",children:[s.street,e.jsx("br",{}),s.city,", ",s.state," ",s.zipCode,e.jsx("br",{}),s.country]}),e.jsxs("div",{className:"text-sm font-bold mt-2 text-foreground",children:["ðŸ“ž ",s.phoneNumber]}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!s.isDefault&&e.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8 text-primary hover:text-primary hover:bg-primary/10",onClick:()=>P(s._id),children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>T(s._id),children:e.jsx(V,{className:"h-4 w-4"})})]})]},s._id)):e.jsxs("div",{className:"text-center py-10 border-2 border-dashed rounded-3xl",children:[e.jsx(A,{className:"h-10 w-10 text-muted-foreground/20 mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"No addresses saved yet."})]})})]})}),e.jsx(u,{value:"logout",children:e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Sign Out"}),e.jsx(g,{children:"Are you sure you want to sign out?"})]}),e.jsx(S,{children:e.jsx(i,{variant:"destructive",onClick:E,children:"Confirm Logout"})})]})})]})]})},G=({user:a})=>{const[l,c]=n.useState({fullName:a?.fullName||"",email:a?.email||"",phoneNumber:a?.phoneNumber||""}),[d,m]=n.useState(!1);n.useEffect(()=>{a&&c({fullName:a.fullName||"",email:a.email||"",phoneNumber:a.phoneNumber||""})},[a]);const x=async()=>{m(!0);try{await $.updateProfile(l),o({title:"Profile Updated",description:"Your profile has been updated successfully."})}catch(r){o({title:"Error",description:r.message,variant:"destructive"})}finally{m(!1)}};return e.jsx(u,{value:"profile",children:e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Profile Information"}),e.jsx(g,{children:"Update your personal details."})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"name",children:"Full Name"}),e.jsx(v,{id:"name",value:l.fullName,onChange:r=>c({...l,fullName:r.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(v,{id:"email",value:l.email,onChange:r=>c({...l,email:r.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"phone",children:"Phone"}),e.jsx(v,{id:"phone",value:l.phoneNumber,onChange:r=>c({...l,phoneNumber:r.target.value})})]})]}),e.jsx(S,{children:e.jsx(i,{onClick:x,disabled:d,children:d?"Saving...":"Save Changes"})})]})})};export{ne as default};
