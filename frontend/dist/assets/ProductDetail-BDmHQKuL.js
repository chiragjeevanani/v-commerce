import{h as U,i as Q,k as V,b as Y,r as d,j as e,B as n,L as D,m as o,l as I,n as J,o as R,A as K}from"./index-Wtch0-zL.js";import{p}from"./products.service-BdGlX65T.js";import{A as M}from"./AnimatedNumber-CkxuFb5h.js";import{S as X}from"./SkeletonCard-Dn-zb03X.js";import{P as z}from"./ProductCard-x0OO7Yqf.js";import{A as _}from"./arrow-left-CGzelT5v.js";import{M as B}from"./minus-DY-jubIb.js";import{P as E}from"./plus-B6PqWma_.js";import"./mockData-Da8oLpbF.js";import"./card-D9j2Wq-Q.js";import"./eye-DyXlGjoB.js";const me=()=>{const{id:u}=U(),h=Q(),{addToCart:g}=V(),{toast:f}=Y(),[s,L]=d.useState(null),[j,T]=d.useState([]),[b,$]=d.useState([]),[F,N]=d.useState(!0),[c,v]=d.useState(1),[x,y]=d.useState(0),[m,W]=d.useState("description");d.useEffect(()=>{(async()=>{N(!0);try{const t=await p.getProductDetails(u);if((t.success||t.result||t.code===200)&&t.data){const i=t.data,q=r=>{if(!r)return[];if(Array.isArray(r))return r;try{const l=JSON.parse(r);return Array.isArray(l)?l:[r]}catch{return[r]}},C=i.productImageSet||q(i.productImage),S=83,O=1.3,G=1.8,A=(r=>{if(!r)return 0;const l=String(r);return l.includes("--")?parseFloat(l.split("--")[0].trim()):parseFloat(l)})(i.sellPrice),H={id:i.pid,pid:i.pid,name:i.productNameEn,image:C[0]||"",images:C,price:Math.round(A*G*S),discountPrice:Math.round(A*O*S),description:i.productHtmlDescription||i.productRemarks||"No description available.",category:i.categoryName||"General",stock:i.warehouseInventoryNum||100,sku:i.productSku,weight:i.productWeight,material:i.material||"High Quality"};L(H);try{const r=await p.getSupplierProducts({categoryId:i.categoryId,size:4});r?.products&&T(r.products.filter(l=>l.pid!==u))}catch(r){console.error("Related products fetch failed",r)}try{const r=await p.getSupplierProducts({size:8});r?.products&&$(r.products.filter(l=>l.pid!==u).slice(0,4))}catch(r){console.error("Recommended products fetch failed",r)}}else throw new Error(t.message||"Product data not found")}catch(t){console.error("Failed to load product",t),f({title:"Error",description:"Could not load product details.",variant:"destructive"})}finally{N(!1)}})(),window.scrollTo(0,0)},[u]);const w=a=>{a==="dec"&&c>1&&v(c-1),a==="inc"&&c<(s?.stock||10)&&v(c+1)},k=()=>{g({...s,quantity:c}),f({title:"Added to cart",description:`${c} x ${s.name} added to your cart.`})},P=()=>{g({...s,quantity:c}),h("/cart")};return F?e.jsxs("div",{className:"container py-8 space-y-8 min-h-screen",children:[e.jsx("div",{className:"h-6 w-24 bg-muted animate-pulse rounded-md"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[e.jsx(X,{className:"h-[500px]",aspectRatio:"square"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-10 bg-muted animate-pulse rounded-lg w-3/4"}),e.jsx("div",{className:"h-20 bg-muted animate-pulse rounded-lg w-full"}),e.jsx("div",{className:"h-12 bg-muted animate-pulse rounded-lg w-1/3"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-full"},a))})]})]})]}):s?e.jsxs("div",{className:"min-h-screen pb-32",children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"absolute top-6 left-6 z-50",children:e.jsx(D,{to:"/",className:"text-2xl font-logo tracking-wider text-white mix-blend-difference hover:opacity-80 transition-opacity",children:"V-Commerce"})}),e.jsxs("section",{className:"relative w-full h-[70vh] overflow-hidden bg-card",children:[e.jsx(o.img,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},src:s.images[x]||s.image,alt:s.name,className:"h-full w-full object-cover"},x),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-transparent to-transparent opacity-60"}),e.jsx("div",{className:"absolute top-6 right-6 flex gap-4 z-20",children:s.discountPrice&&e.jsxs(I,{className:"bg-primary text-primary-foreground px-4 py-1.5 rounded-full font-bold text-xs shadow-xl",children:["- ",Math.round((s.price-s.discountPrice)/s.price*100),"%"]})})]}),e.jsx("div",{className:"container relative -mt-20 z-10",children:e.jsxs(o.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"space-y-8 bg-card p-8 rounded-[40px] shadow-2xl border border-border/50",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-bold text-primary uppercase tracking-[0.2em]",children:s.category}),s.discountPrice&&e.jsx("span",{className:"text-destructive font-black text-xs uppercase tracking-widest animate-pulse",children:"Limited Deal"})]}),e.jsx("h1",{className:"text-2xl font-black text-foreground tracking-tight leading-tight",children:s.name}),e.jsx("div",{className:"flex gap-3 overflow-x-auto py-2 scrollbar-none",children:(s.images||[s.image]).slice(0,5).map((a,t)=>e.jsx("button",{className:`relative h-14 w-14 flex-shrink-0 overflow-hidden rounded-lg border-2 transition-all duration-300 ${t===x?"border-primary shadow-md scale-105":"border-muted hover:border-primary/50"}`,onClick:()=>y(t),children:e.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover"})},t))}),e.jsxs("div",{className:"flex items-center gap-4 py-2",children:[e.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${s.stock>0?"bg-green-500":"bg-red-500"} shadow-[0_0_10px_rgba(34,197,94,0.5)]`}),e.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:s.stock>0?`${s.stock} Units in stock`:"Unavailable"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.3em] text-muted-foreground mb-2",children:"Pricing"}),e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsxs("span",{className:"text-3xl font-black text-primary",children:["₹",e.jsx(M,{value:s.discountPrice||s.price})]}),s.discountPrice&&e.jsxs("span",{className:"text-xl line-through text-muted-foreground opacity-50",children:["₹",s.price]})]})]}),e.jsx("p",{className:"text-base text-muted-foreground leading-relaxed font-medium line-clamp-3",children:s.description})]})})]}),e.jsxs("div",{className:"hidden md:block container py-8",children:[e.jsxs(n,{variant:"ghost",className:"mb-8 hover:bg-transparent hover:text-primary transition-colors group",onClick:()=>h(-1),children:[e.jsx(_,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"})," Back to result"]}),e.jsxs("div",{className:"grid grid-cols-12 gap-12 lg:gap-16",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-7 space-y-6",children:[e.jsxs(o.div,{layoutId:"product-image",className:"aspect-square overflow-hidden rounded-[40px] border bg-muted shadow-lg group relative",children:[e.jsx("img",{src:s.images[x]||s.image,alt:s.name,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105"}),s.discountPrice&&e.jsx("div",{className:"absolute top-8 left-8",children:e.jsxs(I,{className:"bg-primary text-primary-foreground px-6 py-2 rounded-full font-black text-sm shadow-xl",children:["-",Math.round((s.price-s.discountPrice)/s.price*100),"% OFF"]})})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-none",children:(s.images||[s.image]).slice(0,6).map((a,t)=>e.jsx("button",{className:`relative h-24 w-24 flex-shrink-0 overflow-hidden rounded-3xl border-2 transition-all duration-300 ${t===x?"border-primary shadow-lg scale-105":"border-border hover:border-primary/50"}`,onClick:()=>y(t),children:e.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover"})},t))})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-5 space-y-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"text-xs font-bold text-primary uppercase tracking-[0.2em]",children:s.category}),e.jsx("h1",{className:"text-3xl lg:text-4xl xl:text-5xl font-black text-foreground tracking-tight break-words",children:s.name}),e.jsx("div",{className:"flex items-center gap-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-3xl xl:text-4xl font-black text-primary",children:["₹",e.jsx(M,{value:s.discountPrice||s.price})]}),s.discountPrice&&e.jsxs("span",{className:"text-2xl text-muted-foreground line-through opacity-40",children:["₹",s.price]})]})})]}),e.jsx("div",{className:"text-base text-muted-foreground leading-relaxed font-medium border-l-4 border-primary/20 pl-6 product-description",dangerouslySetInnerHTML:{__html:s.description}}),e.jsxs("div",{className:"space-y-8 pt-6 border-t",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-black text-muted-foreground uppercase tracking-widest",children:"Quantity"}),e.jsxs("div",{className:"flex items-center bg-muted rounded-2xl p-1 w-fit border shadow-inner",children:[e.jsx(n,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-xl hover:bg-background shadow-sm transition-all",onClick:()=>w("dec"),disabled:c<=1,children:e.jsx(B,{className:"h-5 w-5"})}),e.jsx("span",{className:"w-16 text-center font-black text-2xl",children:c}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-xl hover:bg-background shadow-sm transition-all",onClick:()=>w("inc"),disabled:c>=s.stock,children:e.jsx(E,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-black text-muted-foreground uppercase tracking-widest",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-3 h-[52px] bg-muted px-6 rounded-2xl border",children:[e.jsx("div",{className:`h-3 w-3 rounded-full animate-pulse ${s.stock>0?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]":"bg-red-500"}`}),e.jsx("span",{className:"font-black uppercase tracking-tighter",children:s.stock>0?`${s.stock} in stock`:"Out of stock"})]})]})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsxs(n,{size:"lg",className:"flex-1 h-14 text-lg font-black rounded-[20px] shadow-xl hover:shadow-primary/30 transition-all active:scale-95 px-8",onClick:k,disabled:s.stock===0,children:[e.jsx(J,{className:"mr-3 h-5 w-5"})," Add to Cart"]}),e.jsxs(n,{size:"lg",variant:"secondary",className:"flex-1 h-14 text-lg font-black rounded-[20px] border shadow-sm hover:bg-muted transition-all active:scale-95",onClick:P,disabled:s.stock===0,children:[e.jsx(R,{className:"mr-3 h-5 w-5"})," Buy Now"]})]})]})]})]})]}),e.jsxs("div",{className:"container",children:[e.jsxs("section",{className:"mt-24",children:[e.jsx("div",{className:"flex gap-8 border-b border-border/50 mb-10 overflow-x-auto scrollbar-none",children:["description","specifications","shipping & returns"].map(a=>e.jsxs("button",{onClick:()=>W(a),className:`pb-4 text-sm font-bold uppercase tracking-widest transition-all relative whitespace-nowrap ${m===a?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[a,m===a&&e.jsx(o.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-primary rounded-full"})]},a))}),e.jsx(K,{mode:"wait",children:e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"max-w-4xl",children:[m==="description"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Product Experience"}),e.jsxs("p",{className:"text-muted-foreground leading-relaxed text-base",children:[s.description,". This premium ",s.category," is designed for those who value quality and performance. Our team has meticulously selected materials that ensure durability while maintaining a sleek, modern aesthetic."]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-8 mt-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})," Key Features"]}),e.jsxs("ul",{className:"space-y-3 text-muted-foreground list-disc list-inside",children:[e.jsx("li",{children:"Professional grade construction"}),e.jsx("li",{children:"Ergonomic design for maximum comfort"}),e.jsx("li",{children:"Highly durable and long-lasting material"}),e.jsx("li",{children:"Sustainably sourced and eco-friendly"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})," What's in the box"]}),e.jsxs("ul",{className:"space-y-3 text-muted-foreground list-disc list-inside",children:[e.jsxs("li",{children:["1x ",s.name]}),e.jsx("li",{children:"User Manual & Setup Guide"}),e.jsx("li",{children:"Premium Packaging Box"}),e.jsx("li",{children:"Warranty Card (1 Year)"})]})]})]})]}),m==="specifications"&&e.jsx("div",{className:"grid gap-4",children:[{label:"Material",value:"Premium Composite"},{label:"Weight",value:"450g"},{label:"Dimensions",value:"24 x 18 x 5 cm"},{label:"Origin",value:"Handcrafted in India"},{label:"Warranty",value:"12 Months Limited"}].map((a,t)=>e.jsxs("div",{className:"flex justify-between py-4 border-b border-border/30 last:border-none",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:a.label}),e.jsx("span",{className:"font-bold",children:a.value})]},t))}),m==="shipping & returns"&&e.jsxs("div",{className:"grid sm:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary shrink-0",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Fast Shipping"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"We offer trackable shipping on all orders. Usually takes 3-5 business days for delivery within major cities."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary shrink-0",children:e.jsx(E,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Secure Packaging"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Every product is sanitized and packed with bubble wrap in high-quality boxes to ensure zero damage during transit."})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-destructive/10 flex items-center justify-center text-destructive shrink-0",children:e.jsx(_,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Easy Returns"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Not happy with your product? We offer a 7-day no-questions-asked return policy for all manufacturing defects."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-destructive/10 flex items-center justify-center text-destructive shrink-0",children:e.jsx(B,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Replacement Policy"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Free replacement if the product is found damaged or incorrect at the time of delivery."})]})]})]})]})]},m)})]}),j.length>0&&e.jsxs("section",{className:"mt-32",children:[e.jsx("div",{className:"flex items-end justify-between mb-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Related Products"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["More items from the ",s.category," collection."]})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((a,t)=>e.jsx(o.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},children:e.jsx(z,{product:a})},a.id))})]}),b.length>0&&e.jsxs("section",{className:"mt-24",children:[e.jsx("div",{className:"flex items-end justify-between mb-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"You May Also Like"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Personalized recommendations just for you."})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((a,t)=>e.jsx(o.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:t*.1},children:e.jsx(z,{product:a})},a.id))})]}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-xl border-t md:hidden z-50 flex gap-4",children:[e.jsx(n,{className:"flex-1 h-12 font-bold rounded-xl shadow-lg",onClick:k,children:"Add to Cart"}),e.jsx(n,{variant:"secondary",className:"flex-1 h-12 font-bold rounded-xl border",onClick:P,children:"Buy Now"})]})]})]}):e.jsxs("div",{className:"container py-12 text-center min-h-screen flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-foreground to-muted-foreground",children:"Product not found"}),e.jsx(n,{onClick:()=>h("/shop"),className:"mt-6 rounded-full px-8",children:"Back to Shop"})]})};export{me as default};
