import{q as b,i as M,b as O,r,j as e,B as l,O as E,N as _,A as z,m as I,Z as P,_ as $,$ as F,a0 as w,C as R,a as T}from"./index-BOPlgZ3J.js";import{o as q}from"./orders.service-Btf2SAmd.js";import{S as B}from"./StatusBadge-CCK9slfy.js";import{C as Q,c as V,a as G}from"./card-B7rOivQ7.js";import{S as H}from"./skeleton-BnRAaj4S.js";import{D as U}from"./download-D_FIyn9b.js";import{R as v}from"./refresh-cw-DpYGspBY.js";import{E as X}from"./eye-BHP40aTH.js";import"./mockData-Da8oLpbF.js";const Z=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],J=b("ellipsis-vertical",Z);const K=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],W=b("search-x",K),ce=()=>{const C=M(),{toast:S}=O(),[x,k]=r.useState([]),[o,h]=r.useState(!0),[i,p]=r.useState(""),[n,u]=r.useState("all"),[t,d]=r.useState(1),[m,A]=r.useState(1),[f,D]=r.useState(0),j=async()=>{h(!0);try{const s=await q.getAllOrders({pageNum:t,pageSize:20});k(s.orders),A(s.totalPages),D(s.total)}catch(s){console.error("Failed to fetch orders:",s),S({title:"Error",description:"Failed to load orders.",variant:"destructive"})}finally{h(!1)}};r.useEffect(()=>{j()},[t]);const g=n==="all"?x:x.filter(s=>s.status.toLowerCase().includes(n.toLowerCase())),N=i?g.filter(s=>s.id.toLowerCase().includes(i.toLowerCase())||s.customer?.name?.toLowerCase().includes(i.toLowerCase())):g,y=s=>{C(`/admin/orders/${s.id}`)};return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Orders Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and track all customer orders."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",className:"gap-2",children:[e.jsx(U,{className:"h-4 w-4"})," Export"]}),e.jsxs(l,{className:"gap-2",onClick:j,disabled:o,children:[e.jsx(v,{className:`h-4 w-4 ${o?"animate-spin":""}`})," Sync Now"]})]})]}),e.jsxs(Q,{children:[e.jsx(V,{className:"border-b bg-muted/20 pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(_,{placeholder:"Search by ID or customer...",className:"pl-10",value:i,onChange:s=>p(s.target.value)})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 scrollbar-none",children:["all","pending","confirmed","shipped","delivered"].map(s=>e.jsx(l,{variant:n===s?"primary":"ghost",size:"sm",className:`capitalize whitespace-nowrap ${n===s?"bg-primary text-primary-foreground":""}`,onClick:()=>u(s),children:s},s))})]})}),e.jsxs(G,{className:"p-0",children:[e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Order ID"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Customer"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Date"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Amount"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-6 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:o?Array.from({length:5}).map((s,c)=>e.jsx("tr",{className:"border-b",children:Array.from({length:6}).map((a,L)=>e.jsx("td",{className:"p-6",children:e.jsx(H,{className:"h-4 w-full"})},L))},c)):N.length>0?e.jsx(z,{children:N.map((s,c)=>e.jsxs(I.tr,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border-b transition-colors hover:bg-muted/50 cursor-pointer",onClick:()=>y(s),children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:s.id.slice(-6).toUpperCase()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-xs",children:s.user?.name||s.shippingAddress?.fullName||"Guest"}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.shippingAddress?.country||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 text-xs whitespace-nowrap",children:new Date(s.date||s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 font-bold text-primary",children:["â‚¹",(s.total||s.totalAmount||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(B,{status:s.status})}),e.jsx("td",{className:"px-6 py-4 text-right",onClick:a=>a.stopPropagation(),children:e.jsxs(P,{children:[e.jsx($,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsxs(F,{align:"end",children:[e.jsxs(w,{onClick:()=>y(s),children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," View Details"]}),e.jsxs(w,{children:[e.jsx(v,{className:"mr-2 h-4 w-4"})," Sync Supplier"]})]})]})})]},s.id))}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(W,{className:"h-10 w-10 opacity-20"}),e.jsx("p",{className:"font-medium",children:"No orders found matching your criteria."}),e.jsx(l,{variant:"link",onClick:()=>{p(""),u("all")},children:"Clear all filters"})]})})})})]})}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-muted/10",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Showing ",(t-1)*20+1," to ",Math.min(t*20,f)," of ",f," orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"icon",onClick:()=>d(s=>Math.max(1,s-1)),disabled:t===1,className:"h-8 w-8",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,m)}).map((s,c)=>{const a=c+1;return e.jsx(l,{variant:t===a?"primary":"outline",size:"sm",className:`h-8 w-8 ${t===a?"bg-primary text-primary-foreground":""}`,onClick:()=>d(a),children:a},a)})}),e.jsx(l,{variant:"outline",size:"icon",onClick:()=>d(s=>Math.min(m,s+1)),disabled:t===m,className:"h-8 w-8",children:e.jsx(T,{className:"h-4 w-4"})})]})]})]})]})]})};export{ce as default};
