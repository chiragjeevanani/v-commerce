import{c as y,M as b,N as v,r as i,j as e,B as d,Q as w,x as k,a7 as C,L as A,U as S}from"./index-DhQy7Vb3.js";import{C as l,c as o,d as x,a as n}from"./card-D8EwhQuE.js";import{S as O}from"./separator-CVTjJVsM.js";import{O as I}from"./OrderTimeline-DohPdkgu.js";import{o as L}from"./orders.service-Dho76qe9.js";import{L as P}from"./loader-circle-CpSO1Tqn.js";import{C as E}from"./circle-alert-C9Kq_WWe.js";import{A as F}from"./arrow-left-CKb50wlr.js";import{M}from"./map-pin-D_KXloBV.js";import{C as T}from"./calendar-teNmuDLo.js";import"./index-CwXijMcI.js";const R=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],z=y("printer",R),K=()=>{const{orderId:m}=b(),p=v(),[s,j]=i.useState(null),[g,h]=i.useState(!0),[u,f]=i.useState(null);i.useEffect(()=>{(async()=>{h(!0);try{const a=await L.getOrderDetails(m);a?j(a):f("Order not found.")}catch{f("Failed to fetch order details.")}finally{h(!1)}})()},[m]);const N=r=>{switch(r.toLowerCase()){case"placed":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"confirmed":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"shipped":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"delivered":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";default:return"bg-muted text-muted-foreground"}};return g?e.jsxs("div",{className:"container py-20 flex flex-col items-center justify-center",children:[e.jsx(P,{className:"w-12 h-12 text-primary animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Loading order details..."})]}):u||!s?e.jsxs("div",{className:"container py-20 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 text-destructive flex items-center justify-center mx-auto mb-4",children:e.jsx(E,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:u||"We couldn't find the order you're looking for."}),e.jsx(d,{onClick:()=>p("/orders"),children:"Back to My Orders"})]}):e.jsxs("div",{className:"container py-8 md:py-12 max-w-5xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>p("/orders"),className:"rounded-full",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold font-mono",children:s.id}),e.jsx(w,{className:k("px-2.5 py-0.5 border-none",N(s.status)),children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Placed on ",new Date(s.date??s.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),s.cjResponse?.data?.orderId&&e.jsxs("p",{className:"text-xs font-bold text-primary flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground font-medium uppercase tracking-tighter",children:"Tracking ID:"}),s.cjResponse.data.orderId]})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-3 no-print",children:e.jsxs(d,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>window.print(),children:[e.jsx(z,{className:"w-4 h-4"}),"Print"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs(l,{className:"border-none shadow-xl bg-card rounded-3xl overflow-hidden",children:[e.jsx(o,{className:"bg-primary/5 border-b border-primary/10",children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-primary"}),"Order Tracking"]})}),e.jsx(n,{className:"pt-8 pb-8 px-6 md:px-10",children:e.jsx(I,{steps:s.timeline,currentStatus:s.status})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(x,{children:["Order Items (",s.items.length,")"]})}),e.jsx(n,{children:e.jsx("div",{className:"divide-y divide-border",children:s.items.map(r=>{const a=t=>{if(!t)return"";if(typeof t!="string")return t;try{if(t.startsWith("[")||t.startsWith("{")){const c=JSON.parse(t);return Array.isArray(c)?c[0]:t}return t}catch{return t}};return e.jsxs("div",{className:"py-4 first:pt-0 last:pb-0 flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-muted overflow-hidden flex-shrink-0",children:e.jsx("img",{src:a(r.image),alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg leading-tight mb-1",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",r.quantity]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-start sm:gap-4 mt-2",children:[e.jsxs("p",{className:"font-bold text-primary",children:["₹",r.price.toFixed(2)," each"]}),e.jsx(d,{variant:"ghost",size:"sm",className:"h-7 text-xs text-primary p-0 sm:px-2",asChild:!0,children:e.jsx(A,{to:`/product/${r.productId??r.pid}`,children:"View Product"})})]})]}),e.jsxs("p",{className:"font-bold text-lg hidden sm:block",children:["₹",(r.price*r.quantity).toFixed(2)]})]},r.productId??r.pid)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"bg-muted/30",children:[e.jsx(o,{children:e.jsx(x,{className:"text-lg",children:"Order Summary"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:["₹",s.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"text-green-600 font-medium",children:"FREE"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsx("span",{children:"₹0.00"})]}),e.jsx(O,{}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:["₹",s.total.toFixed(2)]})]})]})]}),e.jsx(l,{children:e.jsxs(n,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:e.jsx(M,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Shipping Address"}),e.jsx("p",{className:"text-sm font-semibold",children:typeof s.shippingAddress=="object"?e.jsxs(e.Fragment,{children:[s.shippingAddress.fullName,e.jsx("br",{}),s.shippingAddress.street,e.jsx("br",{}),s.shippingAddress.city,", ",s.shippingAddress.state," ",s.shippingAddress.zipCode,e.jsx("br",{}),s.shippingAddress.country]}):s.shippingAddress||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:e.jsx(S,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payment Information"}),e.jsx("p",{className:"text-sm font-semibold",children:s.paymentMethod||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:e.jsx(T,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Delivery"}),e.jsx("p",{className:"text-sm font-semibold text-primary",children:s.estimatedDelivery||"Coming Soon"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsx(d,{className:"w-full h-11",children:"Reorder All Items"})})]})]})]})};export{K as default};
