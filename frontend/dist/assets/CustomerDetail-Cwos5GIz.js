import{h as w,i as C,b as S,r as l,j as e,B as d,C as x,V as h,l as u,W as A,P as f,U as D}from"./index-BOPlgZ3J.js";import{o as k}from"./orders.service-Btf2SAmd.js";import{S as B}from"./StatusBadge-CCK9slfy.js";import{C as n,c as j,d as p,a as m}from"./card-B7rOivQ7.js";import{S as L}from"./separator-DDxKSqXe.js";import{L as E}from"./loader-circle-CcdxeJYH.js";import{C as U}from"./calendar-CUJ9WtMd.js";import{S as O}from"./shield-DL3cjoHj.js";import{A as P}from"./arrow-up-right-BUj8j37h.js";import"./mockData-Da8oLpbF.js";import"./index-BEWmTAkE.js";const q=()=>{const{id:r}=w(),i=C(),{toast:N}=S(),[s,g]=l.useState(null),[c,b]=l.useState([]),[v,o]=l.useState(!0);return l.useEffect(()=>{r&&(async()=>{o(!0);try{const a=await D.getUserById(r);if(a.success)g(a.data);else throw new Error(a.message||"Failed to fetch customer");const y=await k.getOrdersByCustomerId(r);b(y)}catch(a){console.error("Failed to load customer data:",a),N({title:"Error",description:"Failed to load customer details or history.",variant:"destructive"})}finally{o(!1)}})()},[r]),v?e.jsx("div",{className:"flex h-[80vh] items-center justify-center",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-primary"})}):s?e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>i("/admin/customers"),children:e.jsx(x,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.fullName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"})," ",s.email]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"})," Joined ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(u,{variant:s.isActive?"success":"destructive",className:s.isActive?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200",children:s.isActive?"Active Account":"Deactivated"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{children:[e.jsx(j,{className:"border-b bg-muted/20 pb-3",children:e.jsxs(p,{className:"text-base flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})," Account Details"]})}),e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center text-primary text-2xl font-bold",children:s.fullName?.[0]||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:s.fullName}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:s.role})]})]}),e.jsx(L,{}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground block text-xs mb-1",children:"Email Address"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(h,{className:"h-3 w-3 text-muted-foreground"}),s.email]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground block text-xs mb-1",children:"Phone Number"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(A,{className:"h-3 w-3 text-muted-foreground"}),s.phoneNumber||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground block text-xs mb-1",children:"Verification Status"}),e.jsx(u,{variant:"outline",className:s.isVerified?"text-green-600 bg-green-50":"text-yellow-600 bg-yellow-50",children:s.isVerified?"Verified":"Unverified"})]})]})]})]}),e.jsx(n,{className:"bg-primary/5 border-primary/20",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx(f,{className:"h-4 w-4 text-primary"})]}),e.jsx("p",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lifetime order count"})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(j,{className:"border-b bg-muted/20 pb-3",children:e.jsxs(p,{className:"text-base flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})," Order History"]})}),e.jsx(m,{className:"p-0 flex-1",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"h-10 px-4 text-left font-medium text-muted-foreground",children:"Order ID"}),e.jsx("th",{className:"h-10 px-4 text-left font-medium text-muted-foreground",children:"Date"}),e.jsx("th",{className:"h-10 px-4 text-left font-medium text-muted-foreground",children:"Amount"}),e.jsx("th",{className:"h-10 px-4 text-left font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-10 px-4 text-right font-medium text-muted-foreground",children:"Action"})]})}),e.jsx("tbody",{children:c.length>0?c.map(t=>e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.id.slice(-6).toUpperCase()}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:new Date(t.createdAt||t.date).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 font-bold text-primary",children:["$",(t.totalAmount||t.total||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(B,{status:t.status})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>i(`/admin/orders/${t.id}`),children:e.jsx(P,{className:"h-4 w-4"})})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-10 text-center text-muted-foreground",children:e.jsx("p",{children:"No orders placed by this customer yet."})})})})]})})})]})})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Customer not found."}),e.jsxs(d,{variant:"outline",onClick:()=>i("/admin/customers"),children:[e.jsx(x,{className:"mr-2 h-4 w-4"})," Back to Customers"]})]})};export{q as default};
