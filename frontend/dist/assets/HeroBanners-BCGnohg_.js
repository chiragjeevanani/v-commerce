import{q as z,Q as v,b as Q,r as i,j as e,N as w,B as u,ai as U,O as G,m as J,l as K,_ as W,$ as X,a0 as Y,a1 as H,ag as Z,T as ee,a2 as O,a3 as q,a4 as I,a5 as M,a6 as P,a7 as se}from"./index-BpRMWdVM.js";import{C as B,a as A,c as te}from"./card-CyVSnPS_.js";import{L as N}from"./label-XkaMJijg.js";import{T as ae,S as re}from"./textarea-DHMgTgVf.js";import{C as ne}from"./checkbox-D_9u4xlA.js";import{L}from"./loader-circle-BIr11ka_.js";import{P as _}from"./plus-cVjnq_g6.js";import{E as R}from"./eye-D0NRzLWa.js";import{E as $}from"./eye-off-BsVmLTHl.js";import{E as le}from"./ellipsis-CfefETkm.js";import"./index-C_G7Jul-.js";import"./index-D0VtG131.js";const ie=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ce=z("arrow-up-down",ie),y={getHeroBanners:async()=>{try{return(await v.get("/hero-banners")).data}catch(s){throw console.error("Fetch Hero Banners Error:",s),s}},getAdminHeroBanners:async()=>{try{return(await v.get("/hero-banners/admin")).data}catch(s){throw console.error("Fetch Admin Hero Banners Error:",s),s}},createHeroBanner:async s=>{try{return(await v.post("/hero-banners/",s)).data}catch(n){throw console.error("Create Hero Banner Error:",n),n}},updateHeroBanner:async(s,n)=>{try{return(await v.put(`/hero-banners/${s}`,n)).data}catch(m){throw console.error("Update Hero Banner Error:",m),m}},deleteBanner:async s=>{try{return(await v.delete(`/hero-banners/${s}`)).data}catch(n){throw console.error("Delete Hero Banner Error:",n),n}}},oe=({banner:s,onSuccess:n,onCancel:m})=>{const{toast:c}=Q(),[g,b]=i.useState(!1),[p,D]=i.useState(null),[d,j]=i.useState(s?.image||""),[r,h]=i.useState({title:s?.title||"",description:s?.description||"",cta:s?.cta||"",order:s?.order||0,isActive:s?.isActive!==void 0?s.isActive:!0}),o=l=>{const{name:a,value:x,type:F,checked:S}=l.target;h(k=>({...k,[a]:F==="checkbox"?S:x}))},f=l=>{const a=l.target.files[0];a&&(D(a),j(URL.createObjectURL(a)))},C=async l=>{if(l.preventDefault(),!r.title||!r.description||!r.cta){c({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}if(!p&&!s?.image){c({title:"Validation Error",description:"Please select an image for the banner.",variant:"destructive"});return}b(!0);try{const a=new FormData;a.append("title",r.title),a.append("description",r.description),a.append("cta",r.cta),a.append("order",r.order),a.append("isActive",r.isActive),p&&a.append("image",p);let x;s?x=await y.updateHeroBanner(s._id,a):x=await y.createHeroBanner(a),x.success&&(c({title:"Success",description:s?"Banner updated successfully.":"Banner created successfully."}),n())}catch{c({title:"Error",description:s?"Failed to update banner.":"Failed to create banner.",variant:"destructive"})}finally{b(!1)}};return e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"title",children:"Title *"}),e.jsx(w,{id:"title",name:"title",value:r.title,onChange:o,placeholder:"e.g., Summer Collection 2024",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description *"}),e.jsx(ae,{id:"description",name:"description",value:r.description,onChange:o,placeholder:"e.g., Discover the hottest trends for the season.",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"image",children:"Banner Image *"}),e.jsx(w,{id:"image",name:"image",type:"file",accept:"image/*",onChange:f,className:"cursor-pointer",required:!s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended size: 1920x600px"}),d&&e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border bg-muted/20",children:e.jsx("img",{src:d,alt:"Preview",className:"w-full h-40 object-cover"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"cta",children:"Call to Action *"}),e.jsx(w,{id:"cta",name:"cta",value:r.cta,onChange:o,placeholder:"e.g., Shop Now",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"order",children:"Display Order"}),e.jsx(w,{id:"order",name:"order",type:"number",value:r.order,onChange:o,placeholder:"0",min:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower numbers appear first"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2 h-10",children:[e.jsx(ne,{id:"isActive",name:"isActive",checked:r.isActive,onCheckedChange:l=>h(a=>({...a,isActive:l}))}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Active (visible on homepage)"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:m,disabled:g,children:"Cancel"}),e.jsx(u,{type:"submit",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Updating...":"Uploading..."]}):s?"Update Banner":"Create Banner"})]})]})},ye=()=>{const{toast:s}=Q(),[n,m]=i.useState(""),[c,g]=i.useState([]),[b,p]=i.useState(!0),[D,d]=i.useState(!1),[j,r]=i.useState(null),[h,o]=i.useState(null),[f,C]=i.useState(!1),l=async()=>{p(!0);try{const t=await y.getAdminHeroBanners();t.success&&g(t.data)}catch(t){console.error("Fetch Banners Error:",t),s({title:"Error",description:"Failed to load hero banners.",variant:"destructive"})}finally{p(!1)}};i.useEffect(()=>{l()},[]);const a=()=>{r(null),d(!0)},x=t=>{r(t),d(!0)},F=()=>{d(!1),r(null),l()},S=async()=>{if(h){C(!0);try{(await y.deleteBanner(h._id)).success&&(s({title:"Success",description:"Banner deleted successfully."}),l())}catch{s({title:"Error",description:"Failed to delete banner.",variant:"destructive"})}finally{C(!1),o(null)}}},k=async t=>{try{(await y.updateHeroBanner(t._id,{isActive:!t.isActive})).success&&(s({title:"Success",description:`Banner ${t.isActive?"deactivated":"activated"} successfully.`}),l())}catch{s({title:"Error",description:"Failed to update banner status.",variant:"destructive"})}},V=c.filter(t=>t.title.toLowerCase().includes(n.toLowerCase())||t.cta.toLowerCase().includes(n.toLowerCase())),T=c.filter(t=>t.isActive).length;return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Hero Banners"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage homepage hero section banners."})]}),e.jsxs(u,{onClick:a,className:"gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Add New Banner"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(B,{className:"bg-primary/5 border-primary/20",children:e.jsxs(A,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:e.jsx(U,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Banners"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length})]})]})}),e.jsx(B,{className:"bg-green-50 dark:bg-green-950/20 border-green-100 dark:border-green-900/50",children:e.jsxs(A,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/40 rounded-xl text-green-600 dark:text-green-400",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Banners"}),e.jsx("p",{className:"text-2xl font-bold",children:T})]})]})}),e.jsx(B,{className:"bg-slate-50 dark:bg-slate-950/20 border-slate-100 dark:border-slate-900/50",children:e.jsxs(A,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-900/40 rounded-xl text-slate-600 dark:text-slate-400",children:e.jsx($,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Inactive Banners"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length-T})]})]})})]}),e.jsxs(B,{children:[e.jsx(te,{className:"border-b bg-muted/20",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(w,{placeholder:"Search by title or CTA...",className:"pl-10",value:n,onChange:t=>m(t.target.value)})]})})}),e.jsx(A,{className:"p-0",children:e.jsx("div",{className:"relative w-full overflow-auto",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(L,{className:"h-8 w-8 text-primary animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading banners..."})]}):c.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(U,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold",children:"No banners found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first hero banner to get started."}),e.jsxs(u,{onClick:a,className:"gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Add New Banner"]})]}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Order"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Banner"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"CTA"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-6 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:V.map((t,E)=>e.jsxs(J.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:E*.05},className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"font-bold",children:t.order})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-20 rounded-lg overflow-hidden bg-muted",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium",children:t.cta})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(K,{variant:"outline",className:t.isActive?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-700 border-slate-200",children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(W,{children:[e.jsx(X,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"icon",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",className:"w-48",children:[e.jsxs(H,{onClick:()=>x(t),children:[e.jsx(re,{className:"mr-2 h-4 w-4"})," Edit Banner"]}),e.jsx(H,{onClick:()=>k(t),children:t.isActive?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"})," Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Activate"]})}),e.jsx(Z,{}),e.jsxs(H,{className:"text-red-500",onClick:()=>o(t),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"})," Delete Banner"]})]})]})})]},t._id))})]})})})]}),e.jsx(O,{open:D,onOpenChange:d,children:e.jsxs(q,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsx(M,{children:j?"Edit Hero Banner":"Create New Hero Banner"}),e.jsx(P,{children:j?"Update the hero banner details below.":"Fill in the details to create a new hero banner."})]}),e.jsx(oe,{banner:j,onSuccess:F,onCancel:()=>d(!1)})]})}),e.jsx(O,{open:!!h,onOpenChange:()=>o(null),children:e.jsxs(q,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Delete Hero Banner"}),e.jsxs(P,{children:['Are you sure you want to delete "',h?.title,'"? This action cannot be undone.']})]}),e.jsxs(se,{children:[e.jsx(u,{variant:"outline",onClick:()=>o(null),disabled:f,children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:S,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})};export{ye as default};
