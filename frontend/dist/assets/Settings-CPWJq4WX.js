import{c as z,ab as S,E as K,r as p,ak as F,j as e,ae as O,a9 as d,an as q,B as m,Q as H,ad as v}from"./index-DhQy7Vb3.js";import{C as x,a as g,b as I,c as y,d as w,e as Q}from"./card-D8EwhQuE.js";import{L as r}from"./label-ChJsfNxV.js";import{T as Z,a as $,b as C,c as P}from"./tabs-D4O6cJHz.js";import{S as E}from"./switch-DNXBE3Sl.js";import{S as R}from"./separator-CVTjJVsM.js";import{S as J}from"./shield-BrN-dByK.js";import{S as W}from"./save-BwtePfjm.js";import{L as X}from"./lock-B4QBzGSo.js";import{R as ee}from"./refresh-cw-BFR1Qom0.js";import{C as se}from"./circle-check-CPcUrSE2.js";import"./index-CwXijMcI.js";import"./index-DLefiHIg.js";const ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],te=z("globe",ae);const re=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],oe=z("key",re),k={getStoreSettings:async()=>{try{const a=await S.get("/content/get-content",{params:{contentType:"store_settings"}});return a.data?a.data.content:null}catch(a){return console.error("Fetch Store Settings Error:",a),null}},updateStoreSettings:async a=>{try{return(await S.put("/content/update-content",{contentType:"store_settings",content:a})).data}catch(o){throw console.error("Update Store Settings Error:",o),o}},uploadStoreLogo:async a=>{try{const o=new FormData;return o.append("image",a),(await S.post("/upload/settings/store/logo",o,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){throw console.error("Upload Store Logo Error:",o),o}}},Ne=()=>{const{toast:a}=K(),[o,L]=p.useState("account"),[U,T]=p.useState(!1),[j,l]=p.useState(!1),[n,h]=p.useState({storeName:"",storeUrl:"",storeDescription:"",storeLogo:""}),[u,f]=p.useState({fullName:"",email:"",avatar:""}),A=F.useRef(null),D=F.useRef(null),[i,N]=p.useState({oldPassword:"",newPassword:"",confirmPassword:""});p.useEffect(()=>{(async()=>{try{const t=v.getCurrentUser();t&&f({fullName:t.fullName||"",email:t.email||"",avatar:t.avatar||""});const c=await k.getStoreSettings();h(c?{storeName:c.storeName||"",storeUrl:c.storeUrl||"",storeDescription:c.storeDescription||"",storeLogo:c.storeLogo||""}:{storeName:"V-Commerce",storeUrl:"vcommerce.com",storeDescription:"Modern Shopping Experience for Lifestyle & Electronics."})}catch(t){console.error("Failed to load settings:",t),a({title:"Error",description:"Failed to load settings data.",variant:"destructive"})}})()},[]);const M=async()=>{T(!0),setTimeout(()=>{T(!1),a({title:"Connection Successful",description:"Supplier API is responding correctly."})},1500)},_=async()=>{l(!0);try{await k.updateStoreSettings(n),a({title:"Store Settings Updated",description:"Your store details have been saved."})}catch{a({title:"Error",description:"Failed to update store settings.",variant:"destructive"})}finally{l(!1)}},G=async()=>{l(!0);try{await v.updateProfile(u),a({title:"Profile Updated",description:"Your admin details have been saved."})}catch(s){a({title:"Error",description:s.message||"Failed to update profile.",variant:"destructive"})}finally{l(!1)}},B=async()=>{if(i.newPassword!==i.confirmPassword){a({title:"Password Mismatch",description:"New passwords do not match.",variant:"destructive"});return}l(!0);try{await v.changePassword({oldPassword:i.oldPassword,newPassword:i.newPassword}),a({title:"Password Changed",description:"Your password has been updated successfully."}),N({oldPassword:"",newPassword:"",confirmPassword:""})}catch(s){a({title:"Error",description:s.message||"Failed to change password.",variant:"destructive"})}finally{l(!1)}},V=async s=>{const t=s.target.files[0];if(t){l(!0);try{const c=await k.uploadStoreLogo(t);h(b=>({...b,storeLogo:c.data.storeLogo})),a({title:"Logo Uploaded",description:"Store logo updated successfully."})}catch{a({title:"Upload Failed",description:"Could not upload logo.",variant:"destructive"})}finally{l(!1)}}},Y=async s=>{const t=s.target.files[0];if(t){l(!0);try{const c=await v.uploadAvatar(t);f(b=>({...b,avatar:c.data.avatar})),a({title:"Avatar Uploaded",description:"Profile picture updated successfully."})}catch{a({title:"Upload Failed",description:"Could not upload avatar.",variant:"destructive"})}finally{l(!1)}}};return e.jsxs("div",{className:"space-y-6 pb-10 max-w-5xl",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure your store, API connections, and account preferences."})]}),e.jsxs(Z,{value:o,onValueChange:L,className:"space-y-6",children:[e.jsxs($,{className:"bg-muted/50 p-1 border",children:[e.jsxs(C,{value:"account",className:"gap-2",children:[e.jsx(O,{className:"h-4 w-4"})," Account Settings"]}),e.jsxs(C,{value:"security",className:"gap-2",children:[e.jsx(J,{className:"h-4 w-4"})," Security"]}),e.jsxs(C,{value:"api",className:"gap-2",children:[e.jsx(oe,{className:"h-4 w-4"})," API & Tools"]})]}),e.jsx(P,{value:"account",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-bold",children:"Store Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"General information about your ecommerce platform."})]}),e.jsxs(x,{className:"md:col-span-2",children:[e.jsxs(g,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"store-name",children:"Store Name"}),e.jsx(d,{id:"store-name",value:n.storeName,onChange:s=>h({...n,storeName:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"store-url",children:"Store URL"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center px-3 bg-muted border border-r-0 rounded-l-md text-xs font-medium",children:"https://"}),e.jsx(d,{id:"store-url",className:"rounded-l-none",value:n.storeUrl,onChange:s=>h({...n,storeUrl:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(r,{htmlFor:"store-desc",children:"Store Description"}),e.jsx(d,{id:"store-desc",value:n.storeDescription,onChange:s=>h({...n,storeDescription:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{children:"Store Logo"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"h-20 w-20 rounded-xl border-2 border-dashed flex items-center justify-center bg-muted overflow-hidden",children:n.storeLogo?e.jsx("img",{src:n.storeLogo,alt:"Store Logo",className:"h-full w-full object-cover"}):e.jsx(q,{className:"h-8 w-8 text-muted-foreground opacity-20"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:V}),e.jsx(m,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>A.current?.click(),disabled:j,children:"Change Logo"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Recommended size: 512x512px (PNG, SVG)"})]})]})]})]}),e.jsx(I,{className:"border-t bg-muted/20 justify-end py-3",children:e.jsxs(m,{className:"gap-2",onClick:_,disabled:j,children:[e.jsx(W,{className:"h-4 w-4"})," Save Store Settings"]})})]}),e.jsx(R,{className:"col-span-1 md:col-span-3 my-4"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-bold",children:"Administrator Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your personal account details."})]}),e.jsxs(x,{className:"md:col-span-2",children:[e.jsxs(g,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 pb-4",children:[e.jsx("div",{className:"h-24 w-24 rounded-full border-4 border-muted overflow-hidden",children:e.jsx("img",{src:u.avatar||"https://github.com/shadcn.png",className:"h-full w-full object-cover"})}),e.jsx("input",{type:"file",ref:D,className:"hidden",accept:"image/*",onChange:Y}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>D.current?.click(),disabled:j,children:"Change Avatar"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Full Name"}),e.jsx(d,{value:u.fullName,onChange:s=>f({...u,fullName:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Email Address"}),e.jsx(d,{value:u.email,onChange:s=>f({...u,email:s.target.value})})]})]})]}),e.jsx(I,{className:"border-t py-3 justify-end gap-2",children:e.jsx(m,{onClick:G,disabled:j,children:"Update Profile"})})]})]})}),e.jsx(P,{value:"security",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-bold",children:"Security & Login"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Protect your administrative account."})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(x,{children:[e.jsx(y,{children:e.jsxs(w,{className:"text-lg flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"})," Change Password"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Current Password"}),e.jsx(d,{type:"password",value:i.oldPassword,onChange:s=>N({...i,oldPassword:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"New Password"}),e.jsx(d,{type:"password",value:i.newPassword,onChange:s=>N({...i,newPassword:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Confirm New Password"}),e.jsx(d,{type:"password",value:i.confirmPassword,onChange:s=>N({...i,confirmPassword:s.target.value})})]}),e.jsx(m,{className:"w-full",onClick:B,disabled:j,children:"Update Password"})]})]}),e.jsxs(x,{className:"border-red-100 dark:border-red-900/30",children:[e.jsx(y,{children:e.jsx(w,{className:"text-red-600 text-lg",children:"Danger Zone"})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between border-t pt-4 border-red-50 dark:border-red-900/10",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-bold",children:"Resign as Admin"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will revoke all your management access."})]}),e.jsx(m,{variant:"destructive",size:"sm",children:"Deactivate Account"})]})})]})]})]})}),e.jsx(P,{value:"api",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-bold",children:"Supplier API Connections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage keys for your dropshipping network integrations."})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(x,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(te,{className:"h-5 w-5 text-indigo-700"})}),e.jsxs("div",{children:[e.jsx(w,{className:"text-lg",children:"Global Dropship Network"}),e.jsx(Q,{children:"Main marketplace API Integration"})]})]}),e.jsx(H,{className:"bg-green-500",children:"Connected"})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"api-key",children:"Supplier API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{id:"api-key",type:"password",value:"••••••••••••••••••••••••••••",readOnly:!0,className:"font-mono"}),e.jsx(m,{variant:"outline",size:"icon",children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/40 rounded-lg text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Last sync: Oct 23, 2023 - 10:45 AM"})]}),e.jsx(m,{variant:"ghost",size:"sm",className:"text-xs h-8 text-primary font-bold",onClick:M,disabled:U,children:U?"Testing...":"Test Connection"})]})]})]}),e.jsxs(x,{children:[e.jsx(y,{children:e.jsx(w,{className:"text-lg font-bold",children:"Automation Settings"})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{className:"font-bold",children:"Auto-Sync Inventory"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Update stock counts automatically every hour."})]}),e.jsx(E,{defaultChecked:!0})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{className:"font-bold",children:"Price Protection"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me if supplier price increases above my markup."})]}),e.jsx(E,{defaultChecked:!0})]})]})]})]})]})})]})]})};export{Ne as default};
