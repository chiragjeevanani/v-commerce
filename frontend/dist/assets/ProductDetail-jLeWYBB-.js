import{c as h,M as F,N as M,E as A,r as c,j as e,an as T,B as x,Q as d,m as _,a9 as D}from"./index-DhQy7Vb3.js";import{p as C}from"./products.service-DdOLJEu3.js";import{C as n,a as o,c as m,d as p}from"./card-D8EwhQuE.js";import{S as N}from"./separator-CVTjJVsM.js";import{S as f}from"./skeleton-B06u3R7z.js";import{A as L}from"./arrow-left-CKb50wlr.js";import{L as q}from"./loader-circle-CpSO1Tqn.js";import{S as $}from"./save-BwtePfjm.js";import{C as z}from"./circle-check-CPcUrSE2.js";import{I as B}from"./info-Bwaiqb7i.js";import{C as J}from"./calendar-teNmuDLo.js";import{T as R}from"./trending-up-u3ptfXGT.js";import{S as V}from"./shield-check-BLWnj4jH.js";import"./mockData-Da8oLpbF.js";import"./index-CwXijMcI.js";const H=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],O=h("box",H);const W=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],G=h("external-link",W);const U=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],K=h("layers",U);const Q=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Y=h("tag",Q),pe=()=>{const{id:g}=F(),b=M(),{toast:u}=A(),[s,P]=c.useState(null),[I,v]=c.useState(!0),[l,y]=c.useState(30),[w,k]=c.useState(!1),[j,S]=c.useState(null);c.useEffect(()=>{(async()=>{v(!0);try{const t=await C.getProductDetails(g);if(t.success&&t.code===200){const r=t.data;typeof r.productImage=="string"&&r.productImage.startsWith("[")&&(r.productImageSet=JSON.parse(r.productImage),r.productImage=r.productImageSet[0]),P(r),S(r.productImage),y(30)}else throw new Error(t.message||"Failed to fetch product details")}catch(t){console.error("Error:",t),u({title:"Error",description:"Could not load product details from CJ API.",variant:"destructive"})}finally{v(!1)}})()},[g]);const E=async()=>{k(!0);try{await C.updateProductMargin(g,l),u({title:"Settings saved",description:"Product markup has been updated successfully."})}catch{u({title:"Error",description:"Failed to save settings.",variant:"destructive"})}finally{k(!1)}};if(I)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(f,{className:"h-10 w-40"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx(f,{className:"lg:col-span-1 h-[400px] rounded-2xl"}),e.jsx(f,{className:"lg:col-span-2 h-[400px] rounded-2xl"})]})]});if(!s)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(T,{className:"h-16 w-16 text-muted-foreground opacity-20 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Product Not Found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"The product you're looking for might have been removed from CJ Dropshipping."}),e.jsx(x,{variant:"outline",className:"mt-6",onClick:()=>b("/admin/products"),children:"Go Back to Products"})]});const i=83;return(parseFloat(s.sellPrice)*i*(1+l/100)).toFixed(2),e.jsxs("div",{className:"space-y-8 pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>b("/admin/products"),className:"rounded-full",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight line-clamp-1 max-w-xl",children:s.productNameEn}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(d,{variant:"outline",className:"bg-indigo-50 text-indigo-700 border-indigo-200",children:["PID: ",s.pid]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.categoryName})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{variant:"outline",className:"gap-2",asChild:!0,children:e.jsxs("a",{href:`https://cjdropshipping.com/product/${s.productNameEn.replace(/\s+/g,"-")}-p-${s.pid}.html`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(G,{className:"h-4 w-4"})," View on CJ"]})}),e.jsxs(x,{className:"gap-2 bg-indigo-600 hover:bg-indigo-700",onClick:E,disabled:w,children:[w?e.jsx(q,{className:"h-4 w-4 animate-spin"}):e.jsx($,{className:"h-4 w-4"}),"Save Changes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(n,{className:"overflow-hidden border-none shadow-premium bg-card",children:[e.jsx("div",{className:"aspect-square relative group bg-white",children:e.jsx(_.img,{initial:{opacity:0},animate:{opacity:1},src:j,alt:s.productNameEn,className:"h-full w-full object-contain transition-transform duration-500 group-hover:scale-105"},j)}),s.productImageSet&&s.productImageSet.length>0&&e.jsx(o,{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.productImageSet.slice(0,10).map((a,t)=>e.jsx("button",{onClick:()=>S(a),className:`aspect-square rounded-md border overflow-hidden transition-all ${j===a?"ring-2 ring-indigo-600 border-transparent":"opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:a,className:"h-full w-full object-cover"})},t))})})]}),e.jsx(n,{className:"border-none shadow-premium bg-indigo-600 text-white",children:e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] opacity-70 uppercase font-black tracking-widest",children:"Global Listings"}),e.jsxs("p",{className:"text-2xl font-black",children:[s.listedNum?.toLocaleString()||"0","+"]})]}),e.jsx(O,{className:"h-8 w-8 opacity-20"})]}),e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-white/10",children:[e.jsx("span",{className:"opacity-70",children:"Inventory Type"}),e.jsx(d,{className:"bg-white/20 hover:bg-white/30 text-white border-none",children:s.productType||"ORDINARY"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-white/10",children:[e.jsx("span",{className:"opacity-70",children:"Source"}),e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"})," CJ Official"]})]})]})]})}),e.jsxs(n,{className:"border-none shadow-premium",children:[e.jsx(m,{className:"pb-2",children:e.jsxs(p,{className:"text-xs font-black uppercase tracking-widest flex items-center gap-2 text-muted-foreground",children:[e.jsx(B,{className:"h-4 w-4 text-indigo-600"})," Technical Details"]})}),e.jsx(o,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tight mb-1",children:"Materials"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(s.materialNameEnSet||[]).map((a,t)=>e.jsx(d,{variant:"secondary",className:"text-[10px] py-0",children:a},t))})]}),e.jsx(N,{className:"opacity-50"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tight",children:"Weight"}),e.jsxs("p",{className:"text-sm font-bold",children:[s.productWeight,"g"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tight",children:"Packing"}),e.jsx("p",{className:"text-sm font-bold text-indigo-600",children:(s.packingNameEnSet||[])[0]||"Standard"})]})]}),e.jsx(N,{className:"opacity-50"}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsxs("p",{className:"text-[10px]",children:["Synced since ",s.createrTime?new Date(s.createrTime).toLocaleDateString():"N/A"]})]})]})})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(n,{className:"border-none shadow-premium bg-gradient-to-br from-card to-indigo-50/10",children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-indigo-600"})," Pricing & Profit Strategy"]})}),e.jsxs(o,{className:"space-y-8 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest",children:"Base Cost Range"}),e.jsxs("p",{className:"text-xl font-black text-muted-foreground",children:["₹",(parseFloat(s.sellPrice)*i).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] text-indigo-600 uppercase font-bold tracking-widest",children:"Global Markup"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{type:"number",value:l,onChange:a=>y(a.target.value),className:"w-24 font-bold text-lg border-indigo-200"}),e.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"%"})]})]}),e.jsxs("div",{className:"p-4 bg-indigo-600 rounded-2xl text-white shadow-lg shadow-indigo-600/20 flex flex-col justify-center",children:[e.jsx("p",{className:"text-[10px] opacity-70 uppercase font-bold tracking-widest mb-1",children:"Estimated Sale Price"}),e.jsx("p",{className:"text-2xl font-black italic",children:s.sellPrice.includes("-")?e.jsxs(e.Fragment,{children:["₹",(parseFloat(s.sellPrice.split("-")[0])*i*(1+l/100)).toFixed(2)," - ₹",(parseFloat(s.sellPrice.split("-")[1])*i*(1+l/100)).toFixed(2)]}):`₹${(parseFloat(s.sellPrice)*i*(1+l/100)).toFixed(2)}`})]})]}),e.jsx(N,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Product Properties"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.productProEnSet?.map((a,t)=>e.jsx(d,{variant:"outline",className:"bg-indigo-50/50 border-indigo-100 text-indigo-700",children:a},t)),(!s.productProEnSet||s.productProEnSet.length===0)&&e.jsx(d,{variant:"outline",className:"opacity-50 italic",children:"No special properties"})]})]}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-xl space-y-2 border border-dashed border-muted-foreground/20",children:[e.jsxs("h4",{className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[e.jsx(V,{className:"h-3 w-3 text-green-500"})," Admin Note"]}),e.jsx("textarea",{className:"w-full bg-transparent text-sm resize-none focus:outline-none min-h-[60px] scrollbar-none",placeholder:"Add private internal notes about this product..."})]})]})]})]}),e.jsxs(n,{className:"border-none shadow-premium overflow-hidden",children:[e.jsx(m,{className:"bg-muted/10 border-b",children:e.jsxs(p,{className:"text-sm font-bold flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-indigo-600"})," Active Variants (",s.variants?.length||0,")"]})}),e.jsx(o,{className:"p-0",children:e.jsx("div",{className:"max-h-[400px] overflow-auto scrollbar-thin",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-white z-10",children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"h-10 px-6 text-left align-middle font-medium text-muted-foreground text-[10px] uppercase tracking-tighter",children:"Variant"}),e.jsx("th",{className:"h-10 px-6 text-left align-middle font-medium text-muted-foreground text-[10px] uppercase tracking-tighter",children:"SKU"}),e.jsx("th",{className:"h-10 px-6 text-left align-middle font-medium text-muted-foreground text-[10px] uppercase tracking-tighter",children:"Supply Cost"}),e.jsx("th",{className:"h-10 px-6 text-right align-middle font-medium text-muted-foreground text-[10px] uppercase tracking-tighter",children:"Inventory"})]})}),e.jsx("tbody",{className:"divide-y",children:s.variants?.map((a,t)=>e.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded border overflow-hidden shrink-0",children:e.jsx("img",{src:a.variantImage,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-[11px] leading-tight line-clamp-1",children:a.variantKey}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.variantStandard})]})]})}),e.jsx("td",{className:"px-6 py-3 font-mono text-[9px] text-muted-foreground",children:a.variantSku}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-indigo-600",children:["₹",(parseFloat(a.variantSellPrice)*i).toFixed(2)]}),e.jsxs("span",{className:"text-[9px] text-green-600",children:["Sug: ₹",(parseFloat(a.variantSugSellPrice)*i).toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-3 text-right",children:e.jsx(d,{variant:"outline",className:"text-[10px]",children:a.inventoryNum||"Syncing..."})})]},a.vid))})]})})})]}),e.jsxs(n,{className:"border-none shadow-premium",children:[e.jsx(m,{className:"border-b bg-muted/5",children:e.jsxs(p,{className:"text-sm font-bold flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-indigo-600"})," Web Description & Marketing"]})}),e.jsx(o,{className:"pt-6",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-muted-foreground detail-description",dangerouslySetInnerHTML:{__html:s.description}})})]})]})]})]})};export{pe as default};
