import{h as D,i as O,k as Q,b as W,r as l,j as e,B as c,L as H,m as d,l as P,n as V,o as A,A as K}from"./index-BOPlgZ3J.js";import{s as f}from"./storeProduct.service-CoQop0NC.js";import{A as S}from"./AnimatedNumber-BGkptNV6.js";import{S as Y}from"./SkeletonCard-BxTiH4JZ.js";import{S as C}from"./StoreProductCard-BC8y1t-f.js";import{A as I}from"./arrow-left-BGFXH1Un.js";import{M as _}from"./minus-Bv485YlP.js";import{P as z}from"./plus-gUIvaxu1.js";import"./card-B7rOivQ7.js";import"./eye-BHP40aTH.js";const ce=()=>{const{id:u}=D(),p=O(),{addToCart:R}=Q(),{toast:h}=W(),[s,$]=l.useState(null),[j,B]=l.useState([]),[v,E]=l.useState([]),[M,b]=l.useState(!0),[r,y]=l.useState(1),[m,N]=l.useState(0),[n,T]=l.useState("description");l.useEffect(()=>{q(),window.scrollTo(0,0)},[u]),l.useEffect(()=>{s&&(L(),U())},[s]);const q=async()=>{b(!0);try{const a=await f.getProductById(u);if(a.success)$(a.data);else throw new Error(a.message||"Product not found")}catch(a){console.error("Failed to load product",a),h({title:"Error",description:"Could not load product details.",variant:"destructive"})}finally{b(!1)}},L=async()=>{try{const a=s.categoryId?._id||s.categoryId;if(a){const t=await f.getActiveProducts({categoryId:a,limit:4});t.success&&B(t.data.filter(G=>G._id!==u).slice(0,4))}}catch(a){console.error("Related products fetch failed",a)}},U=async()=>{try{const a=await f.getActiveProducts({limit:8});a.success&&E(a.data.filter(t=>t._id!==u).slice(0,4))}catch(a){console.error("Recommended products fetch failed",a)}},k=a=>{const t=s?.trackInventory?s.stock:999;a==="dec"&&r>1&&y(r-1),a==="inc"&&r<t&&y(r+1)},g=()=>{if(!s.isActive){h({title:"Product Unavailable",description:"This product is currently unavailable.",variant:"destructive"});return}if(s.trackInventory&&s.stock<r){h({title:"Insufficient Stock",description:`Only ${s.stock} items available.`,variant:"destructive"});return}R({pid:s._id,id:s._id,name:s.name,image:s.images?.[0]||"",images:s.images||[],price:s.compareAtPrice||s.price,discountPrice:s.price,quantity:r,category:s.categoryId?.name||s.category||"General",sku:s.sku,stock:s.stock,isStoreProduct:!0}),h({title:"Added to cart",description:`${r} x ${s.name} added to your cart.`})},w=()=>{g(),p("/cart")};if(M)return e.jsxs("div",{className:"container py-8 space-y-8 min-h-screen",children:[e.jsx("div",{className:"h-6 w-24 bg-muted animate-pulse rounded-md"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[e.jsx(Y,{className:"h-[500px]",aspectRatio:"square"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-10 bg-muted animate-pulse rounded-lg w-3/4"}),e.jsx("div",{className:"h-20 bg-muted animate-pulse rounded-lg w-full"}),e.jsx("div",{className:"h-12 bg-muted animate-pulse rounded-lg w-1/3"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-full"},a))})]})]})]});if(!s)return e.jsxs("div",{className:"container py-12 text-center min-h-screen flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-foreground to-muted-foreground",children:"Product not found"}),e.jsx(c,{onClick:()=>p("/store-products"),className:"mt-6 rounded-full px-8",children:"Back to Store Products"})]});const o=s.images||[],i=s.trackInventory&&s.stock<=0,F=s.trackInventory?s.stock:999,x=s.compareAtPrice&&s.compareAtPrice>s.price?Math.round((s.compareAtPrice-s.price)/s.compareAtPrice*100):0;return e.jsxs("div",{className:"min-h-screen pb-32",children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"absolute top-6 left-6 z-50",children:e.jsx(H,{to:"/",className:"text-2xl font-logo tracking-wider text-white mix-blend-difference hover:opacity-80 transition-opacity",children:"V-Commerce"})}),e.jsxs("section",{className:"relative w-full h-[70vh] overflow-hidden bg-card",children:[e.jsx(d.img,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},src:o[m]||"/placeholder-product.png",alt:s.name,className:"h-full w-full object-cover"},m),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-transparent to-transparent opacity-60"}),e.jsx("div",{className:"absolute top-6 right-6 flex gap-4 z-20",children:x>0&&e.jsxs(P,{className:"bg-primary text-primary-foreground px-4 py-1.5 rounded-full font-bold text-xs shadow-xl",children:["- ",x,"%"]})})]}),e.jsx("div",{className:"container relative -mt-20 z-10",children:e.jsxs(d.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"space-y-8 bg-card p-8 rounded-[40px] shadow-2xl border border-border/50",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-bold text-primary uppercase tracking-[0.2em]",children:s.categoryId?.name||"General"}),x>0&&e.jsx("span",{className:"text-destructive font-black text-xs uppercase tracking-widest animate-pulse",children:"Limited Deal"})]}),e.jsx("h1",{className:"text-2xl font-black text-foreground tracking-tight leading-tight",children:s.name}),o.length>0&&e.jsx("div",{className:"flex gap-3 overflow-x-auto py-2 scrollbar-none",children:o.slice(0,5).map((a,t)=>e.jsx("button",{className:`relative h-14 w-14 flex-shrink-0 overflow-hidden rounded-lg border-2 transition-all duration-300 ${t===m?"border-primary shadow-md scale-105":"border-muted hover:border-primary/50"}`,onClick:()=>N(t),children:e.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover"})},t))}),e.jsxs("div",{className:"flex items-center gap-4 py-2",children:[e.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${i?"bg-red-500":"bg-green-500"} shadow-[0_0_10px_rgba(34,197,94,0.5)]`}),e.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:i?"Unavailable":`${s.stock||"Many"} Units in stock`})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.3em] text-muted-foreground mb-2",children:"Pricing"}),e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsxs("span",{className:"text-3xl font-black text-primary",children:["₹",e.jsx(S,{value:s.price})]}),s.compareAtPrice&&s.compareAtPrice>s.price&&e.jsxs("span",{className:"text-xl line-through text-muted-foreground opacity-50",children:["₹",s.compareAtPrice]})]})]}),e.jsx("p",{className:"text-base text-muted-foreground leading-relaxed font-medium line-clamp-3",children:s.shortDescription||s.description?.replace(/<[^>]*>/g,"").substring(0,150)||"Premium quality product."})]})})]}),e.jsxs("div",{className:"hidden md:block container py-8",children:[e.jsxs(c,{variant:"ghost",className:"mb-8 hover:bg-transparent hover:text-primary transition-colors group",onClick:()=>p(-1),children:[e.jsx(I,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"})," Back to result"]}),e.jsxs("div",{className:"grid grid-cols-12 gap-12 lg:gap-16",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-7 space-y-6",children:[e.jsxs(d.div,{layoutId:"product-image",className:"aspect-square overflow-hidden rounded-[40px] border bg-muted shadow-lg group relative",children:[e.jsx("img",{src:o[m]||"/placeholder-product.png",alt:s.name,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105"}),x>0&&e.jsx("div",{className:"absolute top-8 left-8",children:e.jsxs(P,{className:"bg-primary text-primary-foreground px-6 py-2 rounded-full font-black text-sm shadow-xl",children:["-",x,"% OFF"]})})]}),o.length>1&&e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-none",children:o.slice(0,6).map((a,t)=>e.jsx("button",{className:`relative h-24 w-24 flex-shrink-0 overflow-hidden rounded-3xl border-2 transition-all duration-300 ${t===m?"border-primary shadow-lg scale-105":"border-border hover:border-primary/50"}`,onClick:()=>N(t),children:e.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover"})},t))})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-5 space-y-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"text-xs font-bold text-primary uppercase tracking-[0.2em]",children:s.categoryId?.name||"General"}),e.jsx("h1",{className:"text-3xl lg:text-4xl xl:text-5xl font-black text-foreground tracking-tight break-words",children:s.name}),e.jsx("div",{className:"flex items-center gap-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-3xl xl:text-4xl font-black text-primary",children:["₹",e.jsx(S,{value:s.price})]}),s.compareAtPrice&&s.compareAtPrice>s.price&&e.jsxs("span",{className:"text-2xl text-muted-foreground line-through opacity-40",children:["₹",s.compareAtPrice]})]})})]}),e.jsx("div",{className:"text-base text-muted-foreground leading-relaxed font-medium border-l-4 border-primary/20 pl-6 product-description",dangerouslySetInnerHTML:{__html:s.description||s.shortDescription||"Premium quality product."}}),e.jsxs("div",{className:"space-y-8 pt-6 border-t",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-black text-muted-foreground uppercase tracking-widest",children:"Quantity"}),e.jsxs("div",{className:"flex items-center bg-muted rounded-2xl p-1 w-fit border shadow-inner",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-xl hover:bg-background shadow-sm transition-all",onClick:()=>k("dec"),disabled:r<=1,children:e.jsx(_,{className:"h-5 w-5"})}),e.jsx("span",{className:"w-16 text-center font-black text-2xl",children:r}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-xl hover:bg-background shadow-sm transition-all",onClick:()=>k("inc"),disabled:r>=F||i,children:e.jsx(z,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-black text-muted-foreground uppercase tracking-widest",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-3 h-[52px] bg-muted px-6 rounded-2xl border",children:[e.jsx("div",{className:`h-3 w-3 rounded-full animate-pulse ${i?"bg-red-500":"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]"}`}),e.jsx("span",{className:"font-black uppercase tracking-tighter",children:i?"Out of stock":`${s.stock||"Many"} in stock`})]})]})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsxs(c,{size:"lg",className:"flex-1 h-14 text-lg font-black rounded-[20px] shadow-xl hover:shadow-primary/30 transition-all active:scale-95 px-8",onClick:g,disabled:i||!s.isActive,children:[e.jsx(V,{className:"mr-3 h-5 w-5"})," Add to Cart"]}),e.jsxs(c,{size:"lg",variant:"secondary",className:"flex-1 h-14 text-lg font-black rounded-[20px] border shadow-sm hover:bg-muted transition-all active:scale-95",onClick:w,disabled:i||!s.isActive,children:[e.jsx(A,{className:"mr-3 h-5 w-5"})," Buy Now"]})]})]})]})]})]}),e.jsxs("div",{className:"container",children:[e.jsxs("section",{className:"mt-24",children:[e.jsx("div",{className:"flex gap-8 border-b border-border/50 mb-10 overflow-x-auto scrollbar-none",children:["description","specifications","shipping & returns"].map(a=>e.jsxs("button",{onClick:()=>T(a),className:`pb-4 text-sm font-bold uppercase tracking-widest transition-all relative whitespace-nowrap ${n===a?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[a,n===a&&e.jsx(d.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-primary rounded-full"})]},a))}),e.jsx(K,{mode:"wait",children:e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"max-w-4xl",children:[n==="description"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Product Experience"}),e.jsx("div",{className:"text-muted-foreground leading-relaxed text-base",dangerouslySetInnerHTML:{__html:s.description||s.shortDescription||"Premium quality product."}}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-8 mt-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})," Key Features"]}),e.jsxs("ul",{className:"space-y-3 text-muted-foreground list-disc list-inside",children:[e.jsx("li",{children:"Professional grade construction"}),e.jsx("li",{children:"Ergonomic design for maximum comfort"}),e.jsx("li",{children:"Highly durable and long-lasting material"}),e.jsx("li",{children:"Sustainably sourced and eco-friendly"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})," What's in the box"]}),e.jsxs("ul",{className:"space-y-3 text-muted-foreground list-disc list-inside",children:[e.jsxs("li",{children:["1x ",s.name]}),e.jsx("li",{children:"User Manual & Setup Guide"}),e.jsx("li",{children:"Premium Packaging Box"}),e.jsx("li",{children:"Warranty Card (1 Year)"})]})]})]})]}),n==="specifications"&&e.jsx("div",{className:"grid gap-4",children:[{label:"SKU",value:s.sku||"N/A"},{label:"Category",value:s.categoryId?.name||"General"},{label:"Subcategory",value:s.subcategoryId?.name||"N/A"},{label:"Stock",value:s.trackInventory?`${s.stock} units`:"Unlimited"},{label:"Status",value:s.isActive?"Active":"Inactive"}].filter(a=>a.value!=="N/A").map((a,t)=>e.jsxs("div",{className:"flex justify-between py-4 border-b border-border/30 last:border-none",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:a.label}),e.jsx("span",{className:"font-bold",children:a.value})]},t))}),n==="shipping & returns"&&e.jsxs("div",{className:"grid sm:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary shrink-0",children:e.jsx(A,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Fast Shipping"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"We offer trackable shipping on all orders. Usually takes 3-5 business days for delivery within major cities."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary shrink-0",children:e.jsx(z,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Secure Packaging"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Every product is sanitized and packed with bubble wrap in high-quality boxes to ensure zero damage during transit."})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-destructive/10 flex items-center justify-center text-destructive shrink-0",children:e.jsx(I,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Easy Returns"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Not happy with your product? We offer a 7-day no-questions-asked return policy for all manufacturing defects."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-destructive/10 flex items-center justify-center text-destructive shrink-0",children:e.jsx(_,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg",children:"Replacement Policy"}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Free replacement if the product is found damaged or incorrect at the time of delivery."})]})]})]})]})]},n)})]}),j.length>0&&e.jsxs("section",{className:"mt-32",children:[e.jsx("div",{className:"flex items-end justify-between mb-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Related Products"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["More items from the ",s.categoryId?.name||"General"," collection."]})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((a,t)=>e.jsx(d.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},children:e.jsx(C,{product:a})},a._id))})]}),v.length>0&&e.jsxs("section",{className:"mt-24",children:[e.jsx("div",{className:"flex items-end justify-between mb-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"You May Also Like"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Personalized recommendations just for you."})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:v.map((a,t)=>e.jsx(d.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:t*.1},children:e.jsx(C,{product:a})},a._id))})]}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-xl border-t md:hidden z-50 flex gap-4",children:[e.jsx(c,{className:"flex-1 h-12 font-bold rounded-xl shadow-lg",onClick:g,disabled:i||!s.isActive,children:"Add to Cart"}),e.jsx(c,{variant:"secondary",className:"flex-1 h-12 font-bold rounded-xl border",onClick:w,disabled:i||!s.isActive,children:"Buy Now"})]})]})]})};export{ce as default};
