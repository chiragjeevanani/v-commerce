import{q as E,r,b as F,i as O,j as e,m as l,A as R,V as v,N as c,B as p,L as q,U as h}from"./index-BOPlgZ3J.js";import{L as d}from"./label-BW8eO7Km.js";import{L as f}from"./loader-circle-CcdxeJYH.js";import{A as g}from"./arrow-right-nRR4vu2y.js";import{A as D}from"./arrow-left-BGFXH1Un.js";import{S as I}from"./shield-check-iSSnvCCl.js";import{L as w}from"./lock-DS104kMD.js";import"./index-BEWmTAkE.js";const B=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],M=E("key-round",B),J=()=>{const[m,x]=r.useState(1),[i,N]=r.useState(""),[y,b]=r.useState(""),[u,k]=r.useState(""),[j,P]=r.useState(""),[S,C]=r.useState(""),[o,n]=r.useState(!1),{toast:t}=F(),L=O(),T=async s=>{s.preventDefault(),n(!0);try{await h.forgotPassword(i),t({title:"OTP Sent",description:`Verification code sent to ${i}`}),x(2)}catch(a){t({title:"Error",description:a.message,variant:"destructive"})}finally{n(!1)}},A=async s=>{s.preventDefault(),n(!0);try{const a=await h.verifyForgotOTP(i,y);C(a.data.resetToken),t({title:"Verified",description:"OTP verified. Now set your new password."}),x(3)}catch(a){t({title:"Verification Failed",description:a.message,variant:"destructive"})}finally{n(!1)}},V=async s=>{if(s.preventDefault(),u!==j)return t({title:"Error",description:"Passwords do not match",variant:"destructive"});n(!0);try{await h.resetPassword(i,S,u),t({title:"Success",description:"Password reset successful. Please login."}),L("/login")}catch(a){t({title:"Error",description:a.message,variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4 font-inter",children:e.jsx(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md bg-card border rounded-[40px] overflow-hidden shadow-2xl relative",children:e.jsx("div",{className:"p-10",children:e.jsxs(R,{mode:"wait",children:[m===1&&e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-8",children:[e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-primary/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(v,{className:"h-10 w-10 text-primary"})}),e.jsx("h1",{className:"text-4xl font-black tracking-tighter",children:"Forgot Password?"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Enter your email to receive a 6-digit verification code."})]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",className:"font-black text-xs uppercase tracking-widest ml-1",children:"Email Address"}),e.jsxs("div",{className:"relative group",children:[e.jsx(v,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors"}),e.jsx(c,{id:"email",type:"email",placeholder:"your@email.com",className:"pl-12 h-14 rounded-2xl focus:ring-primary border-muted text-lg font-medium",required:!0,value:i,onChange:s=>N(s.target.value)})]})]}),e.jsx(p,{type:"submit",className:"w-full h-14 rounded-2xl font-black text-lg bg-primary hover:bg-primary/90 transition-all shadow-xl shadow-primary/20 group relative overflow-hidden",disabled:o,children:o?e.jsx(f,{className:"h-6 w-6 animate-spin"}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Send Verification OTP"}),e.jsx(g,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-muted/50",children:e.jsxs(q,{to:"/login",className:"inline-flex items-center gap-2 text-sm font-black text-muted-foreground hover:text-primary transition-colors uppercase tracking-widest group",children:[e.jsx(D,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"})," Back to Sign In"]})})]},"step1"),m===2&&e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-8",children:[e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-primary/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(I,{className:"h-10 w-10 text-primary"})}),e.jsx("h1",{className:"text-4xl font-black tracking-tighter",children:"Verify OTP"}),e.jsxs("p",{className:"text-muted-foreground font-medium",children:["We've sent a code to ",e.jsx("span",{className:"text-foreground font-bold",children:i})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"otp",className:"font-black text-xs uppercase tracking-widest ml-1",children:"6-Digit Code"}),e.jsx(c,{id:"otp",type:"text",maxLength:6,placeholder:"0 0 0 0 0 0",className:"h-16 rounded-2xl border-muted text-center text-3xl font-black tracking-[0.5em] focus:ring-primary",required:!0,value:y,onChange:s=>b(s.target.value)})]}),e.jsx(p,{type:"submit",className:"w-full h-14 rounded-2xl font-black text-lg bg-primary hover:bg-primary/90 transition-all shadow-xl shadow-primary/20 group relative overflow-hidden",disabled:o,children:o?e.jsx(f,{className:"h-6 w-6 animate-spin"}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Verify & Continue"}),e.jsx(g,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]})})]}),e.jsx("button",{onClick:()=>x(1),className:"w-full text-sm font-black text-muted-foreground hover:text-primary transition-colors underline underline-offset-4",children:"Resend Code"})]},"step2"),m===3&&e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-8",children:[e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-primary/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(M,{className:"h-10 w-10 text-primary"})}),e.jsx("h1",{className:"text-4xl font-black tracking-tighter",children:"New Password"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Setup a strong password for your account."})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"pass",className:"font-black text-xs uppercase tracking-widest ml-1",children:"New Password"}),e.jsxs("div",{className:"relative group",children:[e.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors"}),e.jsx(c,{id:"pass",type:"password",className:"pl-12 h-14 rounded-2xl border-muted",required:!0,value:u,onChange:s=>k(s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"confirm",className:"font-black text-xs uppercase tracking-widest ml-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative group",children:[e.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors"}),e.jsx(c,{id:"confirm",type:"password",className:"pl-12 h-14 rounded-2xl border-muted",required:!0,value:j,onChange:s=>P(s.target.value)})]})]}),e.jsx(p,{type:"submit",className:"w-full h-14 rounded-2xl font-black text-lg bg-primary hover:bg-primary/90 transition-all shadow-xl shadow-primary/20 group relative overflow-hidden mt-4",disabled:o,children:o?e.jsx(f,{className:"h-6 w-6 animate-spin"}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Secure Account"}),e.jsx(g,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]})})]})]},"step3")]})})})})};export{J as default};
