import{c as b,M as v,N as y,E as w,r as n,j as e,B as m,C as x,a7 as p,ae as C,U as A,Q as k}from"./index-DhQy7Vb3.js";import{o as S}from"./orders.service-GUrWDhPY.js";import{S as O}from"./StatusBadge-CVkBBNPd.js";import{C as t,c as d,d as l,a as i}from"./card-D8EwhQuE.js";import{S as h}from"./separator-CVTjJVsM.js";import{L as $}from"./loader-circle-CpSO1Tqn.js";import{C as L}from"./calendar-teNmuDLo.js";import{T as M}from"./truck-DrnOI554.js";import{M as T}from"./map-pin-D_KXloBV.js";import"./mockData-Da8oLpbF.js";import"./index-CwXijMcI.js";const B=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],F=b("receipt",B),K=()=>{const{id:c}=v(),o=y(),{toast:u}=w(),[s,j]=n.useState(null),[f,g]=n.useState(!0);if(n.useEffect(()=>{c&&(async()=>{try{const r=await S.getOrderById(c);j(r)}catch(r){console.error("Failed to load order:",r),u({title:"Error",description:"Failed to load order details.",variant:"destructive"})}finally{g(!1)}})()},[c]),f)return e.jsx("div",{className:"flex h-[80vh] items-center justify-center",children:e.jsx($,{className:"h-8 w-8 animate-spin text-primary"})});if(!s)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Order not found."}),e.jsxs(m,{variant:"outline",onClick:()=>o("/admin/orders"),children:[e.jsx(x,{className:"mr-2 h-4 w-4"})," Back to Orders"]})]});const N=typeof s.shippingAddress=="string"?s.shippingAddress:s.shippingAddress?`${s.shippingAddress.fullName||""}, ${s.shippingAddress.street||""}, ${s.shippingAddress.city||""}, ${s.shippingAddress.state||""}, ${s.shippingAddress.country||""} - ${s.shippingAddress.zipCode||""}`:"N/A";return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{variant:"outline",size:"icon",onClick:()=>o("/admin/orders"),children:e.jsx(x,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Order #",s.id?.slice(-8).toUpperCase()]}),e.jsx(O,{status:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1 text-sm",children:[e.jsx(L,{className:"h-3 w-3"}),new Date(s.createdAt||s.date).toLocaleString()]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(m,{variant:"outline",className:"gap-2",children:[e.jsx(F,{className:"h-4 w-4"})," Invoice"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(t,{children:[e.jsx(d,{className:"border-b bg-muted/20",children:e.jsxs(l,{className:"text-base flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-muted-foreground"})," Order Items"]})}),e.jsx(i,{className:"p-0",children:e.jsx("div",{className:"divide-y",children:s.items?.map((a,r)=>e.jsxs("div",{className:"flex gap-4 p-4 items-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-lg overflow-hidden border bg-background shrink-0",children:a.image?e.jsx("img",{src:a.image,alt:a.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-muted text-muted-foreground",children:e.jsx(p,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["SKU: ",a.sku||a.pid||"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold",children:["₹",(a.price||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["x ",a.quantity]})]}),e.jsxs("div",{className:"text-right w-24 font-bold",children:["₹",((a.price||0)*(a.quantity||1)).toFixed(2)]})]},r))})})]}),e.jsxs(t,{children:[e.jsx(d,{className:"border-b bg-muted/20",children:e.jsxs(l,{className:"text-base flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})," Order Timeline"]})}),e.jsx(i,{className:"p-6",children:e.jsx("div",{className:"relative border-l-2 border-muted ml-3 space-y-8",children:s.timeline?.map((a,r)=>e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:`absolute -left-[9px] top-0 h-4 w-4 rounded-full border-2 ${a.completed?"bg-primary border-primary":"bg-background border-muted"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-sm font-medium ${a.completed?"text-primary":"text-muted-foreground"}`,children:a.label}),a.date&&e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(a.date).toLocaleString()})]})]},r))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{children:[e.jsx(d,{className:"border-b bg-muted/20 pb-3",children:e.jsxs(l,{className:"text-base flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})," Customer"]})}),e.jsxs(i,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:s.user?.name?.[0]||s.customer?.name?.[0]||"G"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.user?.name||s.customer?.name||"Guest"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.user?.email||"No email provided"})]})]}),e.jsx(h,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[e.jsx(T,{className:"h-4 w-4"})," Shipping Address"]}),e.jsx("p",{className:"text-sm leading-relaxed pl-6",children:N})]})]})]}),e.jsxs(t,{children:[e.jsx(d,{className:"border-b bg-muted/20 pb-3",children:e.jsxs(l,{className:"text-base flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})," Payment"]})}),e.jsxs(i,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-muted/30 p-3 rounded-lg border",children:[e.jsx("span",{className:"text-sm font-medium",children:s.paymentMethod||"Card"}),e.jsx(k,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:"Paid"})]}),e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:["₹",(s.total||s.totalAmount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{children:"₹0.00"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsx("span",{children:"₹0.00"})]}),e.jsx(h,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:["₹",(s.total||s.totalAmount||0).toFixed(2)]})]})]})]})]})]})]})]})};export{K as default};
