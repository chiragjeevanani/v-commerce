import{i as w,r as l,j as e,B as i,O as k,N as C,K as A,L as S,m as L,l as O,p as B,a as E}from"./index-Wtch0-zL.js";import{C as u,a as h}from"./card-D9j2Wq-Q.js";import{o as I}from"./orders.service-ZmqhHa53.js";import{A as R}from"./arrow-left-CGzelT5v.js";import{C as M}from"./calendar-c9lMxmVH.js";import{C as W}from"./circle-alert-42TsDkDL.js";import{C as f}from"./circle-check-Dkg5XSin.js";import{T as F}from"./truck-BIxadlMC.js";import{C as Q}from"./clock-RF1G8KVN.js";const G=()=>{const o=w(),[d,m]=l.useState([]),[p,g]=l.useState(!0),[a,j]=l.useState("");l.useEffect(()=>{(async()=>{try{const r=await I.getMyOrders(),n=Array.isArray(r)?r:Array.isArray(r?.data)?r.data:Array.isArray(r?.orders)?r.orders:[];m(n)}catch(r){console.error("Failed to fetch orders:",r),m([])}finally{g(!1)}})()},[]);const b=(s="")=>{switch(s.toLowerCase()){case"placed":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"confirmed":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"shipped":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"delivered":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"cancelled":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}},y=(s="")=>{switch(s.toLowerCase()){case"placed":return e.jsx(Q,{className:"w-3 h-3"});case"confirmed":return e.jsx(f,{className:"w-3 h-3"});case"shipped":return e.jsx(F,{className:"w-3 h-3"});case"delivered":return e.jsx(f,{className:"w-3 h-3"});default:return e.jsx(W,{className:"w-3 h-3"})}},x=Array.isArray(d)?d.filter(s=>s?.id?.toLowerCase().includes(a.toLowerCase())||s?.items?.some(r=>r?.name?.toLowerCase().includes(a.toLowerCase()))):[];return e.jsxs("div",{className:"container py-8 md:py-12 max-w-4xl",children:[e.jsxs(i,{variant:"ghost",className:"mb-6 hover:bg-transparent hover:text-primary transition-colors group p-0",onClick:()=>o(-1),children:[e.jsx(R,{className:"mr-2 h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Orders"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and track your recent purchases."})]}),e.jsxs("div",{className:"relative w-full md:w-72",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(C,{placeholder:"Search orders...",className:"pl-9",value:a,onChange:s=>j(s.target.value)})]})]}),p?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-32 w-full rounded-xl bg-muted animate-pulse"},s))}):x.length===0?e.jsx(u,{className:"border-2 border-dashed border-muted bg-transparent py-16 text-center",children:e.jsxs(h,{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(A,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No orders found"}),e.jsx("p",{className:"text-muted-foreground max-w-xs mx-auto mb-6",children:a?"We couldn't find any orders matching your search.":"You haven't placed any orders yet."}),e.jsx(i,{asChild:!0,children:e.jsx(S,{to:"/shop",children:"Start Shopping"})})]})}):e.jsx("div",{className:"space-y-4",children:x.map((s,r)=>e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsx(u,{className:"group hover:border-primary/30 transition-all hover:shadow-md cursor-pointer",onClick:()=>o(`/orders/${s.id}`),children:e.jsx(h,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsxs("div",{className:"p-4 sm:p-6 sm:border-r border-border flex flex-row sm:flex-col gap-2 bg-muted/20",children:[e.jsxs("div",{className:"relative flex -space-x-3 overflow-hidden",children:[s.items?.slice(0,3).map((n,N)=>{const v=t=>{if(!t)return"";if(typeof t!="string")return t;try{if(t.startsWith("[")||t.startsWith("{")){const c=JSON.parse(t);return Array.isArray(c)?c[0]:t}return t}catch{return t}};return e.jsx("div",{className:"inline-block h-12 w-12 rounded-full ring-2 ring-background overflow-hidden bg-white",children:e.jsx("img",{src:v(n.image),alt:"",className:"h-full w-full object-cover"})},N)}),s.items?.length>3&&e.jsxs("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-muted ring-2 ring-background text-xs font-medium",children:["+",s.items.length-3]})]}),e.jsxs("div",{className:"flex flex-col justify-center sm:mt-2",children:[e.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:[s.items?.length," item",s.items?.length!==1?"s":""]}),e.jsxs("p",{className:"text-sm font-bold text-foreground",children:["â‚¹",s.total?.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex-1 p-4 sm:p-6 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"ORDER ID"}),e.jsx("h3",{className:"font-mono font-bold text-lg leading-none",children:s.id})]}),e.jsxs(O,{className:B("flex items-center gap-1 px-2 py-0.5 border-none",b(s.status)),children:[y(s.status),s.status]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.date??s.createdAt).toLocaleDateString()})]}),e.jsxs(i,{variant:"ghost",size:"sm",className:"group-hover:text-primary p-0 h-auto",children:["View Details",e.jsx(E,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]})]})]})})})},s.id))})]})};export{G as default};
