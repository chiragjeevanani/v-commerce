import{c as z,ab as v,r as i,j as e,x as J,E as Q,a9 as y,B as u,an as M,aa as K,m as W,Q as X,ag as Y,ah as Z,ai as ee,aj as H,am as se}from"./index-DhQy7Vb3.js";import{C as B,a as A,c as te}from"./card-D8EwhQuE.js";import{D as U,a as q,b as I,c as O,d as _,e as re}from"./dialog-DPKbFieb.js";import{L as N}from"./label-ChJsfNxV.js";import{C as ae}from"./checkbox-qczCYJqy.js";import{L}from"./loader-circle-CpSO1Tqn.js";import{P}from"./plus-CUcnkQsy.js";import{E as R}from"./eye-CmyYM12b.js";import{E as $}from"./eye-off-B1AJXwnI.js";import{E as ne}from"./ellipsis-DY6o3Icw.js";import{T as ie}from"./trash-2-tV2-5dW1.js";import"./index-CwXijMcI.js";import"./index-DLefiHIg.js";const le=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ce=z("arrow-up-down",le);const oe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],de=z("square-pen",oe),w={getHeroBanners:async()=>{try{return(await v.get("/hero-banners")).data}catch(s){throw console.error("Fetch Hero Banners Error:",s),s}},getAdminHeroBanners:async()=>{try{return(await v.get("/hero-banners/admin")).data}catch(s){throw console.error("Fetch Admin Hero Banners Error:",s),s}},createHeroBanner:async s=>{try{return(await v.post("/hero-banners/",s)).data}catch(a){throw console.error("Create Hero Banner Error:",a),a}},updateHeroBanner:async(s,a)=>{try{return(await v.put(`/hero-banners/${s}`,a)).data}catch(o){throw console.error("Update Hero Banner Error:",o),o}},deleteBanner:async s=>{try{return(await v.delete(`/hero-banners/${s}`)).data}catch(a){throw console.error("Delete Hero Banner Error:",a),a}}},V=i.forwardRef(({className:s,...a},o)=>e.jsx("textarea",{ref:o,className:J("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a}));V.displayName="Textarea";const me=({banner:s,onSuccess:a,onCancel:o})=>{const{toast:c}=Q(),[g,b]=i.useState(!1),[p,k]=i.useState(null),[m,j]=i.useState(s?.image||""),[n,h]=i.useState({title:s?.title||"",description:s?.description||"",cta:s?.cta||"",order:s?.order||0,isActive:s?.isActive!==void 0?s.isActive:!0}),d=l=>{const{name:r,value:x,type:D,checked:F}=l.target;h(S=>({...S,[r]:D==="checkbox"?F:x}))},f=l=>{const r=l.target.files[0];r&&(k(r),j(URL.createObjectURL(r)))},C=async l=>{if(l.preventDefault(),!n.title||!n.description||!n.cta){c({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}if(!p&&!s?.image){c({title:"Validation Error",description:"Please select an image for the banner.",variant:"destructive"});return}b(!0);try{const r=new FormData;r.append("title",n.title),r.append("description",n.description),r.append("cta",n.cta),r.append("order",n.order),r.append("isActive",n.isActive),p&&r.append("image",p);let x;s?x=await w.updateHeroBanner(s._id,r):x=await w.createHeroBanner(r),x.success&&(c({title:"Success",description:s?"Banner updated successfully.":"Banner created successfully."}),a())}catch{c({title:"Error",description:s?"Failed to update banner.":"Failed to create banner.",variant:"destructive"})}finally{b(!1)}};return e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"title",children:"Title *"}),e.jsx(y,{id:"title",name:"title",value:n.title,onChange:d,placeholder:"e.g., Summer Collection 2024",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description *"}),e.jsx(V,{id:"description",name:"description",value:n.description,onChange:d,placeholder:"e.g., Discover the hottest trends for the season.",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"image",children:"Banner Image *"}),e.jsx(y,{id:"image",name:"image",type:"file",accept:"image/*",onChange:f,className:"cursor-pointer",required:!s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended size: 1920x600px"}),m&&e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border bg-muted/20",children:e.jsx("img",{src:m,alt:"Preview",className:"w-full h-40 object-cover"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"cta",children:"Call to Action *"}),e.jsx(y,{id:"cta",name:"cta",value:n.cta,onChange:d,placeholder:"e.g., Shop Now",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"order",children:"Display Order"}),e.jsx(y,{id:"order",name:"order",type:"number",value:n.order,onChange:d,placeholder:"0",min:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower numbers appear first"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2 h-10",children:[e.jsx(ae,{id:"isActive",name:"isActive",checked:n.isActive,onCheckedChange:l=>h(r=>({...r,isActive:l}))}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Active (visible on homepage)"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:o,disabled:g,children:"Cancel"}),e.jsx(u,{type:"submit",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Updating...":"Uploading..."]}):s?"Update Banner":"Create Banner"})]})]})},Be=()=>{const{toast:s}=Q(),[a,o]=i.useState(""),[c,g]=i.useState([]),[b,p]=i.useState(!0),[k,m]=i.useState(!1),[j,n]=i.useState(null),[h,d]=i.useState(null),[f,C]=i.useState(!1),l=async()=>{p(!0);try{const t=await w.getAdminHeroBanners();t.success&&g(t.data)}catch(t){console.error("Fetch Banners Error:",t),s({title:"Error",description:"Failed to load hero banners.",variant:"destructive"})}finally{p(!1)}};i.useEffect(()=>{l()},[]);const r=()=>{n(null),m(!0)},x=t=>{n(t),m(!0)},D=()=>{m(!1),n(null),l()},F=async()=>{if(h){C(!0);try{(await w.deleteBanner(h._id)).success&&(s({title:"Success",description:"Banner deleted successfully."}),l())}catch{s({title:"Error",description:"Failed to delete banner.",variant:"destructive"})}finally{C(!1),d(null)}}},S=async t=>{try{(await w.updateHeroBanner(t._id,{isActive:!t.isActive})).success&&(s({title:"Success",description:`Banner ${t.isActive?"deactivated":"activated"} successfully.`}),l())}catch{s({title:"Error",description:"Failed to update banner status.",variant:"destructive"})}},G=c.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.cta.toLowerCase().includes(a.toLowerCase())),T=c.filter(t=>t.isActive).length;return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Hero Banners"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage homepage hero section banners."})]}),e.jsxs(u,{onClick:r,className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Add New Banner"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(B,{className:"bg-primary/5 border-primary/20",children:e.jsxs(A,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:e.jsx(M,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Banners"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length})]})]})}),e.jsx(B,{className:"bg-green-50 dark:bg-green-950/20 border-green-100 dark:border-green-900/50",children:e.jsxs(A,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/40 rounded-xl text-green-600 dark:text-green-400",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Banners"}),e.jsx("p",{className:"text-2xl font-bold",children:T})]})]})}),e.jsx(B,{className:"bg-slate-50 dark:bg-slate-950/20 border-slate-100 dark:border-slate-900/50",children:e.jsxs(A,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-900/40 rounded-xl text-slate-600 dark:text-slate-400",children:e.jsx($,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Inactive Banners"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length-T})]})]})})]}),e.jsxs(B,{children:[e.jsx(te,{className:"border-b bg-muted/20",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search by title or CTA...",className:"pl-10",value:a,onChange:t=>o(t.target.value)})]})})}),e.jsx(A,{className:"p-0",children:e.jsx("div",{className:"relative w-full overflow-auto",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(L,{className:"h-8 w-8 text-primary animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading banners..."})]}):c.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(M,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold",children:"No banners found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first hero banner to get started."}),e.jsxs(u,{onClick:r,className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Add New Banner"]})]}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Order"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Banner"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"CTA"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-6 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:G.map((t,E)=>e.jsxs(W.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:E*.05},className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"font-bold",children:t.order})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-20 rounded-lg overflow-hidden bg-muted",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium",children:t.cta})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(X,{variant:"outline",className:t.isActive?"bg-green-50 text-green-700 border-green-200":"bg-slate-50 text-slate-700 border-slate-200",children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"icon",children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",className:"w-48",children:[e.jsxs(H,{onClick:()=>x(t),children:[e.jsx(de,{className:"mr-2 h-4 w-4"})," Edit Banner"]}),e.jsx(H,{onClick:()=>S(t),children:t.isActive?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"})," Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Activate"]})}),e.jsx(se,{}),e.jsxs(H,{className:"text-red-500",onClick:()=>d(t),children:[e.jsx(ie,{className:"mr-2 h-4 w-4"})," Delete Banner"]})]})]})})]},t._id))})]})})})]}),e.jsx(U,{open:k,onOpenChange:m,children:e.jsxs(q,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsx(O,{children:j?"Edit Hero Banner":"Create New Hero Banner"}),e.jsx(_,{children:j?"Update the hero banner details below.":"Fill in the details to create a new hero banner."})]}),e.jsx(me,{banner:j,onSuccess:D,onCancel:()=>m(!1)})]})}),e.jsx(U,{open:!!h,onOpenChange:()=>d(null),children:e.jsxs(q,{children:[e.jsxs(I,{children:[e.jsx(O,{children:"Delete Hero Banner"}),e.jsxs(_,{children:['Are you sure you want to delete "',h?.title,'"? This action cannot be undone.']})]}),e.jsxs(re,{children:[e.jsx(u,{variant:"outline",onClick:()=>d(null),disabled:f,children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:F,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete"})]})]})})]})};export{Be as default};
